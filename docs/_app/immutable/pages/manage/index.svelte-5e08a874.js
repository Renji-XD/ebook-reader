var ni=Object.defineProperty,oi=Object.defineProperties;var li=Object.getOwnPropertyDescriptors;var Gt=Object.getOwnPropertySymbols;var ai=Object.prototype.hasOwnProperty,ci=Object.prototype.propertyIsEnumerable;var Zt=(t,e,r)=>e in t?ni(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Je=(t,e)=>{for(var r in e||(e={}))ai.call(e,r)&&Zt(t,r,e[r]);if(Gt)for(var r of Gt(e))ci.call(e,r)&&Zt(t,r,e[r]);return t},_t=(t,e)=>oi(t,li(e));import{S as Me,i as Re,n as Oe,w as Z,x as W,y as D,F as ge,q as L,o as M,B as Y,e as C,c as I,b as _,ac as Wt,_ as V,f as B,M as q,d as w,j as $,t as K,a as A,l as U,g as J,s as Dt,J as T,m as de,p as he,h as Te,$ as Mr,a3 as Rr,a1 as ye,z as Vr,A as Sr,W as se,X as ne,Q as De,a6 as nt,ad as Fr,R as fe,Z as bt,C as xr,a2 as tt,K as we,aa as _e,ae as ve,a7 as Mt,k as gt,af as Yt,a4 as Nt,a5 as Tt,I as ui,a0 as fi,D as di}from"../../chunks/index-df7a4262.js";import{a5 as Kt,H as zr,D as Ne,a6 as Q,w as Ot,x as Ue,z as hi,a7 as $r,y as pi,a8 as Ur,a9 as At,aa as Ct,ab as jr,ac as ft,ad as Be,ae as gi,af as qr,ag as Hr,ah as dt,ai as Xr,G as ot,aj as It,ak as Rt,al as Gr,C as Jt,h as vt,v as Qt,am as ut}from"../../chunks/format-page-title-e664d430.js";import{F as Le,j as mi,k as bi,l as er,m as tr,n as wi,o as _i,p as vi,q as ki}from"../../chunks/fa-f5baca2c.js";import{d as Ei,e as rr,h as yi,b as Ni,j as Ti,k as Oi,c as Ai,t as ir}from"../../chunks/index.es-8c1d8a2e.js";import{g as R,t as it,i as lt,v as Ci,x as mt,y as sr,z as st,f as Ii}from"../../chunks/storage-source-manager-6826c117.js";import{P as rt}from"../../chunks/popover-2a4f0d15.js";import{d as Ze}from"../../chunks/dialog-manager-7832ece7.js";import"../../chunks/singletons-d1fb5791.js";import"../../chunks/use-click-outside-599ab045.js";import"../../chunks/index-80298860.js";var Pi=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function nr(t){let e,r;return e=new Le({props:{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",icon:Ei}}),{c(){Z(e.$$.fragment)},l(i){W(e.$$.fragment,i)},m(i,s){D(e,i,s),r=!0},p:ge,i(i){r||(L(e.$$.fragment,i),r=!0)},o(i){M(e.$$.fragment,i),r=!1},d(i){Y(e,i)}}}function or(t){let e,r,i,s;return{c(){e=C("img"),this.h()},l(n){e=I(n,"IMG",{alt:!0,decoding:!0,loading:!0,referrerpolicy:!0,class:!0,src:!0}),this.h()},h(){_(e,"alt",""),_(e,"decoding","async"),_(e,"loading","lazy"),_(e,"referrerpolicy","no-referrer"),_(e,"class","relative h-full w-full object-cover transition delay-150 duration-700 ease-out"),Wt(e.src,r=t[6](t[0]))||_(e,"src",r),V(e,"blur",!t[5])},m(n,a){B(n,e,a),t[12](e),i||(s=q(e,"load",t[11]),i=!0)},p(n,a){a&1&&!Wt(e.src,r=n[6](n[0]))&&_(e,"src",r),a&32&&V(e,"blur",!n[5])},d(n){n&&w(e),t[12](null),i=!1,s()}}}function Bi(t){let e,r,i,s,n,a,o,l,c,f,m,u,h=`${t[2]*100}%`,d,p,g,E=!t[5]&&nr(),N=t[0]&&or(t);return{c(){e=C("div"),r=C("div"),i=C("div"),E&&E.c(),s=$(),N&&N.c(),n=$(),a=C("div"),o=C("div"),l=C("span"),c=K(t[1]),f=$(),m=C("div"),u=C("div"),this.h()},l(b){e=I(b,"DIV",{class:!0,role:!0});var y=A(e);r=I(y,"DIV",{class:!0});var P=A(r);i=I(P,"DIV",{class:!0});var v=A(i);E&&E.l(v),s=U(v),N&&N.l(v),v.forEach(w),n=U(P),a=I(P,"DIV",{class:!0});var O=A(a);o=I(O,"DIV",{class:!0});var S=A(o);l=I(S,"SPAN",{class:!0});var H=A(l);c=J(H,t[1]),H.forEach(w),S.forEach(w),f=U(O),m=I(O,"DIV",{class:!0});var te=A(m);u=I(te,"DIV",{class:!0}),A(u).forEach(w),te.forEach(w),O.forEach(w),P.forEach(w),y.forEach(w),this.h()},h(){_(i,"class","h-full w-full text-5xl sm:text-7xl"),_(l,"class","line-clamp-3"),_(o,"class","sm:h-21 h-16 bg-gray-800 bg-opacity-80 p-0.5 px-1.5 text-justify text-sm text-white sm:p-1.5 sm:text-base"),_(u,"class","h-full rounded bg-gradient-to-b from-red-600 to-red-900"),Dt(u,"width",h,!1),_(m,"class","h-2.5 bg-gray-400 bg-opacity-80"),_(a,"class","absolute inset-x-0 bottom-0"),_(r,"class","inline"),_(e,"class","aspect-w-2 aspect-h-3 relative cursor-pointer"),_(e,"role","button")},m(b,y){B(b,e,y),T(e,r),T(r,i),E&&E.m(i,null),T(i,s),N&&N.m(i,null),T(r,n),T(r,a),T(a,o),T(o,l),T(l,c),T(a,f),T(a,m),T(m,u),d=!0,p||(g=q(e,"click",t[10]),p=!0)},p(b,[y]){b[5]?E&&(de(),M(E,1,1,()=>{E=null}),he()):E?(E.p(b,y),y&32&&L(E,1)):(E=nr(),E.c(),L(E,1),E.m(i,s)),b[0]?N?N.p(b,y):(N=or(b),N.c(),N.m(i,null)):N&&(N.d(1),N=null),(!d||y&2)&&Te(c,b[1]),y&4&&h!==(h=`${b[2]*100}%`)&&Dt(u,"width",h,!1)},i(b){d||(L(E),d=!0)},o(b){M(E),d=!1},d(b){b&&w(e),E&&E.d(),N&&N.d(),p=!1,g()}}}function Li(t,e,r){let i,{imagePath:s}=e,{title:n}=e,{progress:a}=e,{lastOpen:o}=e,{lastBookModified:l}=e,{lastProgressModified:c}=e,f="";Mr(()=>{f&&URL.revokeObjectURL(f)});function m(b){return f&&(URL.revokeObjectURL(f),f=""),typeof b!="string"?(f=URL.createObjectURL(b),f):b}function u(){let b,y;const P=v=>b?typeof b!="object"||typeof v!="object"?b===v:b.type===v.type&&b.size===v.size:!1;return v=>(P(v)||(b=v,y=m(v)),y)}const h=u();let d,p=!0;function g(b){Rr.call(this,t,b)}const E=()=>r(4,p=!1);function N(b){ye[b?"unshift":"push"](()=>{d=b,r(3,d)})}return t.$$set=b=>{"imagePath"in b&&r(0,s=b.imagePath),"title"in b&&r(1,n=b.title),"progress"in b&&r(2,a=b.progress),"lastOpen"in b&&r(7,o=b.lastOpen),"lastBookModified"in b&&r(8,l=b.lastBookModified),"lastProgressModified"in b&&r(9,c=b.lastProgressModified)},t.$$.update=()=>{t.$$.dirty&24&&r(5,i=(d==null?void 0:d.complete)&&!p)},[s,n,a,d,p,i,h,o,l,c,g,E,N]}class Mi extends Me{constructor(e){super(),Re(this,e,Li,Bi,Oe,{imagePath:0,title:1,progress:2,lastOpen:7,lastBookModified:8,lastProgressModified:9})}}function lr(t,e,r){const i=t.slice();return i[13]=e[r],i}function ar(t){let e,r,i,s,n;r=new Le({props:{class:"absolute left-2 top-2 flex text-xl text-white",icon:mi}});function a(){return t[9](t[13])}return{c(){e=C("div"),Z(r.$$.fragment),this.h()},l(o){e=I(o,"DIV",{class:!0});var l=A(e);W(r.$$.fragment,l),l.forEach(w),this.h()},h(){_(e,"class","absolute inset-0 cursor-pointer bg-gray-700 bg-opacity-20")},m(o,l){B(o,e,l),D(r,e,null),i=!0,s||(n=q(e,"click",a),s=!0)},p(o,l){t=o},i(o){i||(L(r.$$.fragment,o),i=!0)},o(o){M(r.$$.fragment,o),i=!1},d(o){o&&w(e),Y(r),s=!1,n()}}}function cr(t){let e,r,i;return r=new rt({props:{placement:"right",fallbackPlacements:["bottom"],yOffset:5,$$slots:{content:[Vi],icon:[Ri]},$$scope:{ctx:t}}}),{c(){e=C("div"),Z(r.$$.fragment),this.h()},l(s){e=I(s,"DIV",{class:!0});var n=A(e);W(r.$$.fragment,n),n.forEach(w),this.h()},h(){_(e,"class","absolute top-10 left-2")},m(s,n){B(s,e,n),D(r,e,null),i=!0},p(s,n){const a={};n&65553&&(a.$$scope={dirty:n,ctx:s}),r.$set(a)},i(s){i||(L(r.$$.fragment,s),i=!0)},o(s){M(r.$$.fragment,s),i=!1},d(s){s&&w(e),Y(r)}}}function Ri(t){let e,r;return e=new Le({props:{slot:"icon",class:"left-2 top-10 text-xl text-white mdc-elevation--z2 hover:mdc-elevation--z8 mdc-elevation-transition rounded-full bg-blue-400",icon:bi}}),{c(){Z(e.$$.fragment)},l(i){W(e.$$.fragment,i)},m(i,s){D(e,i,s),r=!0},p:ge,i(i){r||(L(e.$$.fragment,i),r=!0)},o(i){M(e.$$.fragment,i),r=!1},d(i){Y(e,i)}}}function ur(t){let e,r,i=We(t[13].lastOpen)+"",s;return{c(){e=C("div"),r=K("Last Read: "),s=K(i),this.h()},l(n){e=I(n,"DIV",{class:!0});var a=A(e);r=J(a,"Last Read: "),s=J(a,i),a.forEach(w),this.h()},h(){_(e,"class","mt-4")},m(n,a){B(n,e,a),T(e,r),T(e,s)},p(n,a){a&1&&i!==(i=We(n[13].lastOpen)+"")&&Te(s,i)},d(n){n&&w(e)}}}function Vi(t){let e,r,i,s=We(t[13].lastBookModified)+"",n,a,o,l,c,f=We(t[13].lastProgressModified)+"",m,u=t[4]===R.LOCAL&&ur(t);return{c(){e=C("div"),r=C("div"),i=K("Added: "),n=K(s),a=$(),u&&u.c(),o=$(),l=C("div"),c=K("Bookmarked: "),m=K(f),this.h()},l(h){e=I(h,"DIV",{class:!0,slot:!0});var d=A(e);r=I(d,"DIV",{});var p=A(r);i=J(p,"Added: "),n=J(p,s),p.forEach(w),a=U(d),u&&u.l(d),o=U(d),l=I(d,"DIV",{class:!0});var g=A(l);c=J(g,"Bookmarked: "),m=J(g,f),g.forEach(w),d.forEach(w),this.h()},h(){V(r,"w-14",!t[13].lastBookModified),_(l,"class","mt-4"),_(e,"class","p-4"),_(e,"slot","content")},m(h,d){B(h,e,d),T(e,r),T(r,i),T(r,n),T(e,a),u&&u.m(e,null),T(e,o),T(e,l),T(l,c),T(l,m)},p(h,d){d&1&&s!==(s=We(h[13].lastBookModified)+"")&&Te(n,s),d&1&&V(r,"w-14",!h[13].lastBookModified),h[4]===R.LOCAL?u?u.p(h,d):(u=ur(h),u.c(),u.m(e,o)):u&&(u.d(1),u=null),d&1&&f!==(f=We(h[13].lastProgressModified)+"")&&Te(m,f)},d(h){h&&w(e),u&&u.d()}}}function fr(t){let e,r,i,s,n;function a(){return t[10](t[13])}return{c(){e=C("div"),r=se("svg"),i=se("path"),this.h()},l(o){e=I(o,"DIV",{class:!0});var l=A(e);r=ne(l,"svg",{role:!0,class:!0,xmlns:!0,viewBox:!0});var c=A(r);i=ne(c,"path",{class:!0,d:!0}),A(i).forEach(w),c.forEach(w),l.forEach(w),this.h()},h(){_(i,"class","fill-current text-white"),_(i,"d","M369.6 313.1c4.7 4.7 4.7 12.3 0 17L330 369.6c-4.7 4.7-12.3 4.7-17 0L248 304l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L126.4 330c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L304 248l65.6 65.1z"),_(r,"role","img"),_(r,"class","w-full"),_(r,"xmlns","http://www.w3.org/2000/svg"),_(r,"viewBox","0 0 504 504"),_(e,"class","mdc-elevation--z2 hover:mdc-elevation--z8 mdc-elevation-transition absolute -top-2 -right-2 h-6 w-6 cursor-pointer rounded-full bg-red-400")},m(o,l){B(o,e,l),T(e,r),T(r,i),s||(n=q(e,"click",a),s=!0)},p(o,l){t=o},d(o){o&&w(e),s=!1,n()}}}function dr(t,e){let r,i,s,n,a=e[2].has(e[13].id),o,l=e[2].has(e[13].id),c,f,m,u,h;const d=[e[13]];function p(){return e[8](e[13])}let g={};for(let P=0;P<d.length;P+=1)g=xr(g,d[P]);s=new Mi({props:g}),s.$on("click",p);let E=a&&ar(e),N=l&&cr(e),b=e[13].id===e[3]&&(e[5]||e[4]===R.LOCAL)&&fr(e);function y(){return e[11](e[13])}return{key:t,first:null,c(){r=C("div"),i=C("div"),Z(s.$$.fragment),n=$(),E&&E.c(),o=$(),N&&N.c(),c=$(),b&&b.c(),f=$(),this.h()},l(P){r=I(P,"DIV",{class:!0});var v=A(r);i=I(v,"DIV",{class:!0});var O=A(i);W(s.$$.fragment,O),n=U(O),E&&E.l(O),O.forEach(w),o=U(v),N&&N.l(v),c=U(v),b&&b.l(v),f=U(v),v.forEach(w),this.h()},h(){_(i,"class","mdc-elevation--z1 hover:mdc-elevation--z8 mdc-elevation-transition relative overflow-hidden"),V(i,"rounded-tl-xl",e[13].id===e[1]),V(i,"mdc-elevation--z4",e[2].has(e[13].id)||e[13].id===e[1]),_(r,"class","relative"),this.first=r},m(P,v){B(P,r,v),T(r,i),D(s,i,null),T(i,n),E&&E.m(i,null),T(r,o),N&&N.m(r,null),T(r,c),b&&b.m(r,null),T(r,f),m=!0,u||(h=[q(r,"mouseenter",y),q(r,"mouseleave",e[12])],u=!0)},p(P,v){e=P;const O=v&1?Vr(d,[Sr(e[13])]):{};s.$set(O),v&5&&(a=e[2].has(e[13].id)),a?E?(E.p(e,v),v&5&&L(E,1)):(E=ar(e),E.c(),L(E,1),E.m(i,null)):E&&(de(),M(E,1,1,()=>{E=null}),he()),v&3&&V(i,"rounded-tl-xl",e[13].id===e[1]),v&7&&V(i,"mdc-elevation--z4",e[2].has(e[13].id)||e[13].id===e[1]),v&5&&(l=e[2].has(e[13].id)),l?N?(N.p(e,v),v&5&&L(N,1)):(N=cr(e),N.c(),L(N,1),N.m(r,c)):N&&(de(),M(N,1,1,()=>{N=null}),he()),e[13].id===e[3]&&(e[5]||e[4]===R.LOCAL)?b?b.p(e,v):(b=fr(e),b.c(),b.m(r,f)):b&&(b.d(1),b=null)},i(P){m||(L(s.$$.fragment,P),L(E),L(N),m=!0)},o(P){M(s.$$.fragment,P),M(E),M(N),m=!1},d(P){P&&w(r),Y(s),E&&E.d(),N&&N.d(),b&&b.d(),u=!1,De(h)}}}function Si(t){let e,r=[],i=new Map,s,n=t[0];const a=o=>o[13].id;for(let o=0;o<n.length;o+=1){let l=lr(t,n,o),c=a(l);i.set(c,r[o]=dr(c,l))}return{c(){e=C("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=I(o,"DIV",{class:!0});var l=A(e);for(let c=0;c<r.length;c+=1)r[c].l(l);l.forEach(w),this.h()},h(){_(e,"class","grid grid-cols-3 justify-between gap-5 pb-4 md:grid-cols-4 lg:grid-cols-5")},m(o,l){B(o,e,l);for(let c=0;c<r.length;c+=1)r[c].m(e,null);s=!0},p(o,[l]){l&255&&(n=o[0],de(),r=nt(r,l,a,1,o,n,i,e,Fr,dr,null,lr),he())},i(o){if(!s){for(let l=0;l<n.length;l+=1)L(r[l]);s=!0}},o(o){for(let l=0;l<r.length;l+=1)M(r[l]);s=!1},d(o){o&&w(e);for(let l=0;l<r.length;l+=1)r[l].d()}}}function We(t){return t?new Date(t).toLocaleDateString():"No Data"}function Fi(t,e,r){let i,s;fe(t,it,g=>r(4,i=g)),fe(t,lt,g=>r(5,s=g));let{bookCards:n=[]}=e,{currentBookId:a}=e,{selectedBookIds:o}=e;const l=bt();let c;function f(g){l("bookClick",{id:g})}const m=g=>f(g.id),u=g=>f(g.id),h=g=>l("removeBookClick",{id:g.id}),d=g=>r(3,c=g.id),p=()=>r(3,c=void 0);return t.$$set=g=>{"bookCards"in g&&r(0,n=g.bookCards),"currentBookId"in g&&r(1,a=g.currentBookId),"selectedBookIds"in g&&r(2,o=g.selectedBookIds)},[n,a,o,c,i,s,l,f,m,u,h,d,p]}class xi extends Me{constructor(e){super(),Re(this,e,Fi,Si,Oe,{bookCards:0,currentBookId:1,selectedBookIds:2})}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */function zi(t){t.setAttribute("webkitdirectory","")}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */function ht(t,e){const r=()=>{var i;(i=t.files)!=null&&i.length&&(e(t.files),t.value="")};return t.addEventListener("change",r),{destroy(){t.removeEventListener("change",r)}}}function hr(t,e,r){const i=t.slice();return i[41]=e[r],i}function pr(t,e,r){const i=t.slice();return i[44]=e[r],i}function gr(t,e,r){const i=t.slice();return i[47]=e[r],i}function $i(t){let e,r,i,s,n,a,o,l,c,f;return r=new rt({props:{contentText:t[4],contentStyles:"padding: 0.75rem",eventType:"pointer",$$slots:{default:[ji]},$$scope:{ctx:t}}}),{c(){e=C("div"),Z(r.$$.fragment),i=$(),s=C("progress"),n=$(),a=C("div"),o=K(t[7]),this.h()},l(m){e=I(m,"DIV",{class:!0});var u=A(e);W(r.$$.fragment,u),i=U(u),s=I(u,"PROGRESS",{class:!0,max:!0}),A(s).forEach(w),n=U(u),a=I(u,"DIV",{class:!0});var h=A(a);o=J(h,t[7]),h.forEach(w),u.forEach(w),this.h()},h(){_(s,"class","w-full mx-4"),s.value=t[5],_(s,"max",t[6]),_(a,"class","ml-4 min-w-fit"),_(e,"class","px-4 md:px-8 lg:max-w-4xl xl:max-w-none 2xl:max-w-6xl mx-auto flex h-full justify-center items-center")},m(m,u){B(m,e,u),D(r,e,null),T(e,i),T(e,s),T(e,n),T(e,a),T(a,o),f=!0},p(m,u){t=m;const h={};u[0]&16&&(h.contentText=t[4]),u[1]&524288&&(h.$$scope={dirty:u,ctx:t}),r.$set(h),(!f||u[0]&32)&&(s.value=t[5]),(!f||u[0]&64)&&_(s,"max",t[6]),(!f||u[0]&128)&&Te(o,t[7])},i(m){f||(L(r.$$.fragment,m),we(()=>{c&&c.end(1),l=_e(e,Q,t[17]),l.start()}),f=!0)},o(m){M(r.$$.fragment,m),l&&l.invalidate(),c=ve(e,Q,t[18]),f=!1},d(m){m&&w(e),Y(r),m&&c&&c.end()}}}function Ui(t){let e,r,i,s,n,a,o,l,c,f,m;const u=[Hi,qi],h=[];function d(y,P){return y[3]===0?0:1}r=d(t),i=h[r]=u[r](t);const p=[Gi,Xi],g=[];function E(y,P){return y[0]?1:0}a=E(t),o=g[a]=p[a](t);let N=!t[0]&&br(t),b=t[3]>0&&Er(t);return{c(){e=C("div"),i.c(),s=$(),n=C("div"),o.c(),l=$(),c=C("div"),N&&N.c(),f=$(),b&&b.c(),this.h()},l(y){e=I(y,"DIV",{class:!0});var P=A(e);i.l(P),s=U(P),n=I(P,"DIV",{class:!0});var v=A(n);o.l(v),v.forEach(w),l=U(P),c=I(P,"DIV",{class:!0});var O=A(c);N&&N.l(O),f=U(O),b&&b.l(O),O.forEach(w),P.forEach(w),this.h()},h(){_(n,"class","absolute left-1/2 h-full -translate-x-1/2 transform-gpu"),_(c,"class","flex transform-gpu "+hi),_(e,"class","flex h-full justify-between "+$r)},m(y,P){B(y,e,P),h[r].m(e,null),T(e,s),T(e,n),g[a].m(n,null),T(e,l),T(e,c),N&&N.m(c,null),T(c,f),b&&b.m(c,null),m=!0},p(y,P){let v=r;r=d(y),r===v?h[r].p(y,P):(de(),M(h[v],1,1,()=>{h[v]=null}),he(),i=h[r],i?i.p(y,P):(i=h[r]=u[r](y),i.c()),L(i,1),i.m(e,s));let O=a;a=E(y),a===O?g[a].p(y,P):(de(),M(g[O],1,1,()=>{g[O]=null}),he(),o=g[a],o?o.p(y,P):(o=g[a]=p[a](y),o.c()),L(o,1),o.m(n,null)),y[0]?N&&(de(),M(N,1,1,()=>{N=null}),he()):N?(N.p(y,P),P[0]&1&&L(N,1)):(N=br(y),N.c(),L(N,1),N.m(c,f)),y[3]>0?b?(b.p(y,P),P[0]&8&&L(b,1)):(b=Er(y),b.c(),L(b,1),b.m(c,null)):b&&(de(),M(b,1,1,()=>{b=null}),he())},i(y){m||(L(i),L(o),L(N),L(b),m=!0)},o(y){M(i),M(o),M(N),M(b),m=!1},d(y){y&&w(e),h[r].d(),g[a].d(),N&&N.d(),b&&b.d()}}}function ji(t){let e,r,i,s,n;return r=new Le({props:{icon:wi,class:"cursor-pointer"}}),{c(){e=C("div"),Z(r.$$.fragment)},l(a){e=I(a,"DIV",{});var o=A(e);W(r.$$.fragment,o),o.forEach(w)},m(a,o){B(a,e,o),D(r,e,null),i=!0,s||(n=q(e,"click",t[40]),s=!0)},p:ge,i(a){i||(L(r.$$.fragment,a),i=!0)},o(a){M(r.$$.fragment,a),i=!1},d(a){a&&w(e),Y(r),s=!1,n()}}}function qi(t){let e,r,i,s,n,a,o,l,c,f,m,u,h;return i=new Le({props:{icon:vi}}),{c(){e=C("div"),r=C("div"),Z(i.$$.fragment),a=$(),o=C("span"),l=K(t[3]),this.h()},l(d){e=I(d,"DIV",{class:!0});var p=A(e);r=I(p,"DIV",{class:!0});var g=A(r);W(i.$$.fragment,g),g.forEach(w),a=U(p),o=I(p,"SPAN",{class:!0});var E=A(o);l=J(E,t[3]),E.forEach(w),p.forEach(w),this.h()},h(){_(r,"class","flex items-center h-full text-2xl xl:text-xl "+Ot+" cursor-pointer"),_(o,"class","transform-gpu translate-x-2"),_(e,"class","flex items-center h-full transform-gpu "+pi+" text-xl font-medium")},m(d,p){B(d,e,p),T(e,r),D(i,r,null),T(e,a),T(e,o),T(o,l),m=!0,u||(h=q(r,"click",t[30]),u=!0)},p(d,p){t=d,(!m||p[0]&8)&&Te(l,t[3])},i(d){m||(L(i.$$.fragment,d),we(()=>{n&&n.end(1),s=_e(r,Q,t[17]),s.start()}),we(()=>{f&&f.end(1),c=_e(o,Q,t[17]),c.start()}),m=!0)},o(d){M(i.$$.fragment,d),s&&s.invalidate(),n=ve(r,Q,t[18]),c&&c.invalidate(),f=ve(o,Q,t[18]),m=!1},d(d){d&&w(e),Y(i),d&&n&&n.end(),d&&f&&f.end(),u=!1,h()}}}function Hi(t){let e,r,i,s,n,a,o,l;return{c(){e=C("div"),r=se("svg"),i=se("path"),this.h()},l(c){e=I(c,"DIV",{class:!0});var f=A(e);r=ne(f,"svg",{xmlns:!0,class:!0,viewBox:!0});var m=A(r);i=ne(m,"path",{class:!0,d:!0}),A(i).forEach(w),m.forEach(w),f.forEach(w),this.h()},h(){_(i,"class","fill-current"),_(i,"d","M20,4v12H8V4H20 M20,2H8C6.9,2,6,2.9,6,4v12c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V4C22,2.9,21.1,2,20,2L20,2z M12.47,14 L9,10.5l1.4-1.41l2.07,2.08L17.6,6L19,7.41L12.47,14z M4,6H2v14c0,1.1,0.9,2,2,2h14v-2H4V6z"),_(r,"xmlns","http://www.w3.org/2000/svg"),_(r,"class","h-12 w-12 xl:h-10 xl:w-10 "+Ye+" cursor-pointer transition-opacity hover:opacity-100"),_(r,"viewBox","0 0 24 24"),V(r,"opacity-100",t[0]),V(r,"opacity-60",!t[0]),_(e,"class","transform-gpu "+es)},m(c,f){B(c,e,f),T(e,r),T(r,i),a=!0,o||(l=q(r,"click",t[29]),o=!0)},p(c,f){t=c,f[0]&1&&V(r,"opacity-100",t[0]),f[0]&1&&V(r,"opacity-60",!t[0])},i(c){a||(we(()=>{n&&n.end(1),s=_e(r,Q,t[17]),s.start()}),a=!0)},o(c){s&&s.invalidate(),n=ve(r,Q,t[18]),a=!1},d(c){c&&w(e),c&&n&&n.end(),o=!1,l()}}}function Xi(t){let e,r,i,s,n,a,o;return{c(){e=se("svg"),r=se("path"),this.h()},l(l){e=ne(l,"svg",{xmlns:!0,viewBox:!0,class:!0});var c=A(e);r=ne(c,"path",{class:!0,d:!0}),A(r).forEach(w),c.forEach(w),this.h()},h(){_(r,"class","fill-current"),_(r,"d","M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"viewBox","0 0 24 24"),_(e,"class","w-12 xl:w-10 h-12 xl:h-10 "+Ye+" "+Ue+" cursor-pointer")},m(l,c){B(l,e,c),T(e,r),n=!0,a||(o=q(e,"click",t[32]),a=!0)},p(l,c){t=l},i(l){n||(we(()=>{s&&s.end(1),i=_e(e,Q,t[17]),i.start()}),n=!0)},o(l){i&&i.invalidate(),s=ve(e,Q,t[18]),n=!1},d(l){l&&w(e),l&&s&&s.end(),a=!1,o()}}}function Gi(t){let e,r,i=t[2]&&mr(t);return{c(){i&&i.c(),e=gt()},l(s){i&&i.l(s),e=gt()},m(s,n){i&&i.m(s,n),B(s,e,n),r=!0},p(s,n){s[2]?i?(i.p(s,n),n[0]&4&&L(i,1)):(i=mr(s),i.c(),L(i,1),i.m(e.parentNode,e)):i&&(de(),M(i,1,1,()=>{i=null}),he())},i(s){r||(L(i),r=!0)},o(s){M(i),r=!1},d(s){i&&i.d(s),s&&w(e)}}}function mr(t){let e,r,i,s,n,a,o,l;return{c(){e=se("svg"),r=se("path"),this.h()},l(c){e=ne(c,"svg",{xmlns:!0,viewBox:!0,class:!0});var f=A(e);r=ne(f,"path",{class:!0,d:!0}),A(r).forEach(w),f.forEach(w),this.h()},h(){_(r,"class","fill-current"),_(r,"d","M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5zm-3.5-8c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99zM13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83zm4.5 1.84c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24z"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"viewBox","0 0 24 24"),_(e,"class",i="h-12 w-12 xl:h-10 xl:w-10 "+Ye+" "+Ue+" cursor-pointer")},m(c,f){B(c,e,f),T(e,r),a=!0,o||(l=q(e,"click",t[31]),o=!0)},p(c,f){t=c},i(c){a||(we(()=>{n&&n.end(1),s=_e(e,Q,t[17]),s.start()}),a=!0)},o(c){s&&s.invalidate(),n=ve(e,Q,t[18]),a=!1},d(c){c&&w(e),c&&n&&n.end(),o=!1,l()}}}function br(t){let e,r,i,s,n,a,o,l,c;r=new rt({props:{placement:"bottom",fallbackPlacements:[],yOffset:0,$$slots:{content:[Wi],icon:[Zi]},$$scope:{ctx:t}}});let f={placement:"bottom",fallbackPlacements:[],yOffset:0,$$slots:{content:[Yi],icon:[Di]},$$scope:{ctx:t}};n=new rt({props:f}),t[35](n);let m={placement:"bottom",fallbackPlacements:[],yOffset:0,$$slots:{content:[Ji],icon:[Ki]},$$scope:{ctx:t}};return l=new rt({props:m}),t[37](l),{c(){e=C("div"),Z(r.$$.fragment),i=$(),s=C("div"),Z(n.$$.fragment),a=$(),o=C("div"),Z(l.$$.fragment),this.h()},l(u){e=I(u,"DIV",{class:!0});var h=A(e);W(r.$$.fragment,h),h.forEach(w),i=U(u),s=I(u,"DIV",{class:!0});var d=A(s);W(n.$$.fragment,d),d.forEach(w),a=U(u),o=I(u,"DIV",{class:!0});var p=A(o);W(l.$$.fragment,p),p.forEach(w),this.h()},h(){_(e,"class","relative"),_(s,"class","relative"),_(o,"class","relative")},m(u,h){B(u,e,h),D(r,e,null),B(u,i,h),B(u,s,h),D(n,s,null),B(u,a,h),B(u,o,h),D(l,o,null),c=!0},p(u,h){const d={};h[0]&24576|h[1]&524288&&(d.$$scope={dirty:h,ctx:u}),r.$set(d);const p={};h[0]&59392|h[1]&524288&&(p.$$scope={dirty:h,ctx:u}),n.$set(p);const g={};h[1]&524288&&(g.$$scope={dirty:h,ctx:u}),l.$set(g)},i(u){c||(L(r.$$.fragment,u),L(n.$$.fragment,u),L(l.$$.fragment,u),c=!0)},o(u){M(r.$$.fragment,u),M(n.$$.fragment,u),M(l.$$.fragment,u),c=!1},d(u){u&&w(e),Y(r),u&&w(i),u&&w(s),t[35](null),Y(n),u&&w(a),u&&w(o),t[37](null),Y(l)}}}function Zi(t){let e,r,i,s,n;return{c(){e=se("svg"),r=se("path"),this.h()},l(a){e=ne(a,"svg",{slot:!0,class:!0,xmlns:!0,viewBox:!0});var o=A(e);r=ne(o,"path",{class:!0,d:!0}),A(r).forEach(w),o.forEach(w),this.h()},h(){_(r,"class","fill-current"),_(r,"d","M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11zM8 15.01l1.41 1.41L11 14.84V19h2v-4.16l1.59 1.59L16 15.01 12.01 11 8 15.01z"),_(e,"slot","icon"),_(e,"class","h-12 w-12 xl:h-10 xl:w-10 "+Ye+" xl:mr-1 "+Ue+" cursor-pointer"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"viewBox","0 0 24 24")},m(a,o){B(a,e,o),T(e,r),n=!0},p(a,o){t=a},i(a){n||(we(()=>{s&&s.end(1),i=_e(e,Q,t[17]),i.start()}),n=!0)},o(a){i&&i.invalidate(),s=ve(e,Q,t[18]),n=!1},d(a){a&&w(e),a&&s&&s.end()}}}function wr(t,e){let r,i=e[47].label+"",s,n,a,o;function l(){return e[33](e[47])}return{key:t,first:null,c(){r=C("div"),s=K(i),n=$(),this.h()},l(c){r=I(c,"DIV",{role:!0,class:!0});var f=A(r);s=J(f,i),n=U(f),f.forEach(w),this.h()},h(){_(r,"role","button"),_(r,"class","block px-4 py-2 text-sm cursor-pointer"),V(r,"hover:bg-white",e[13]||e[14]===R.LOCAL),V(r,"hover:text-gray-700",e[13]||e[14]===R.LOCAL),V(r,"cursor-not-allowed",!e[13]&&e[14]!==R.LOCAL),V(r,"text-gray-500",!e[13]&&e[14]!==R.LOCAL),this.first=r},m(c,f){B(c,r,f),T(r,s),T(r,n),a||(o=q(r,"click",l),a=!0)},p(c,f){e=c,f[0]&24576&&V(r,"hover:bg-white",e[13]||e[14]===R.LOCAL),f[0]&24576&&V(r,"hover:text-gray-700",e[13]||e[14]===R.LOCAL),f[0]&24576&&V(r,"cursor-not-allowed",!e[13]&&e[14]!==R.LOCAL),f[0]&24576&&V(r,"text-gray-500",!e[13]&&e[14]!==R.LOCAL)},d(c){c&&w(r),a=!1,o()}}}function Wi(t){let e,r=[],i=new Map,s=t[19];const n=a=>a[47].type;for(let a=0;a<s.length;a+=1){let o=gr(t,s,a),l=n(o);i.set(l,r[a]=wr(l,o))}return{c(){e=C("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=I(a,"DIV",{class:!0,slot:!0});var o=A(e);for(let l=0;l<r.length;l+=1)r[l].l(o);o.forEach(w),this.h()},h(){_(e,"class","bg-gray-700 w-40"),_(e,"slot","content")},m(a,o){B(a,e,o);for(let l=0;l<r.length;l+=1)r[l].m(e,null)},p(a,o){o[0]&17326080&&(s=a[19],r=nt(r,o,n,1,a,s,i,e,Mt,wr,null,gr))},d(a){a&&w(e);for(let o=0;o<r.length;o+=1)r[o].d()}}}function _r(t){let e,r,i,s,n,a,o;return{c(){e=se("svg"),r=se("path"),this.h()},l(l){e=ne(l,"svg",{class:!0,xmlns:!0,viewBox:!0});var c=A(e);r=ne(c,"path",{class:!0,d:!0}),A(r).forEach(w),c.forEach(w),this.h()},h(){_(r,"class","fill-current"),_(r,"d",i=t[15].d),_(e,"class","h-12 w-12 xl:h-10 xl:w-10 "+Ye+" xl:mr-1 "+Ue+" cursor-pointer"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"viewBox",s=t[15].viewBox)},m(l,c){B(l,e,c),T(e,r),o=!0},p(l,c){t=l,(!o||c[0]&32768&&i!==(i=t[15].d))&&_(r,"d",i),(!o||c[0]&32768&&s!==(s=t[15].viewBox))&&_(e,"viewBox",s)},i(l){o||(we(()=>{a&&a.end(1),n=_e(e,Q,t[17]),n.start()}),o=!0)},o(l){n&&n.invalidate(),a=ve(e,Q,t[18]),o=!1},d(l){l&&w(e),l&&a&&a.end()}}}function Di(t){let e,r=t[15],i,s=_r(t);return{c(){e=C("div"),s.c(),this.h()},l(n){e=I(n,"DIV",{slot:!0});var a=A(e);s.l(a),a.forEach(w),this.h()},h(){_(e,"slot","icon")},m(n,a){B(n,e,a),s.m(e,null),i=!0},p(n,a){a[0]&32768&&Oe(r,r=n[15])?(de(),M(s,1,1,ge),he(),s=_r(n),s.c(),L(s,1),s.m(e,null)):s.p(n,a)},i(n){i||(L(s),i=!0)},o(n){M(s),i=!1},d(n){n&&w(e),s.d(n)}}}function vr(t,e){let r,i=e[44].label+"",s,n,a,o;function l(){return e[34](e[44])}return{key:t,first:null,c(){r=C("div"),s=K(i),n=$(),this.h()},l(c){r=I(c,"DIV",{role:!0,class:!0});var f=A(r);s=J(f,i),n=U(f),f.forEach(w),this.h()},h(){_(r,"role","button"),_(r,"class","block px-4 py-2 text-sm cursor-pointer"),V(r,"hover:bg-white",!e[44].applyExtraClasses||e[13]),V(r,"hover:text-gray-700",!e[44].applyExtraClasses||e[13]),V(r,"cursor-not-allowed",e[44].applyExtraClasses&&!e[13]),V(r,"text-gray-500",e[44].applyExtraClasses&&!e[13]),this.first=r},m(c,f){B(c,r,f),T(r,s),T(r,n),a||(o=q(r,"click",l),a=!0)},p(c,f){e=c,f[0]&1056768&&V(r,"hover:bg-white",!e[44].applyExtraClasses||e[13]),f[0]&1056768&&V(r,"hover:text-gray-700",!e[44].applyExtraClasses||e[13]),f[0]&1056768&&V(r,"cursor-not-allowed",e[44].applyExtraClasses&&!e[13]),f[0]&1056768&&V(r,"text-gray-500",e[44].applyExtraClasses&&!e[13])},d(c){c&&w(r),a=!1,o()}}}function Yi(t){let e,r=[],i=new Map,s=t[20];const n=a=>a[44].key;for(let a=0;a<s.length;a+=1){let o=pr(t,s,a),l=n(o);i.set(l,r[a]=vr(l,o))}return{c(){e=C("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=I(a,"DIV",{class:!0,slot:!0});var o=A(e);for(let l=0;l<r.length;l+=1)r[l].l(o);o.forEach(w),this.h()},h(){_(e,"class","bg-gray-700 w-28"),_(e,"slot","content")},m(a,o){B(a,e,o);for(let l=0;l<r.length;l+=1)r[l].m(e,null)},p(a,o){o[0]&1075200&&(s=a[20],r=nt(r,o,n,1,a,s,i,e,Mt,vr,null,pr))},d(a){a&&w(e);for(let o=0;o<r.length;o+=1)r[o].d()}}}function Ki(t){let e,r,i,s,n;return{c(){e=se("svg"),r=se("path"),this.h()},l(a){e=ne(a,"svg",{slot:!0,class:!0,xmlns:!0,viewBox:!0});var o=A(e);r=ne(o,"path",{class:!0,d:!0}),A(r).forEach(w),o.forEach(w),this.h()},h(){_(r,"class","fill-current"),_(r,"d","M96 480h64C177.7 480 192 465.7 192 448S177.7 416 160 416H96c-17.67 0-32-14.33-32-32V128c0-17.67 14.33-32 32-32h64C177.7 96 192 81.67 192 64S177.7 32 160 32H96C42.98 32 0 74.98 0 128v256C0 437 42.98 480 96 480zM504.8 238.5l-144.1-136c-6.975-6.578-17.2-8.375-26-4.594c-8.803 3.797-14.51 12.47-14.51 22.05l-.0918 72l-128-.001c-17.69 0-32.02 14.33-32.02 32v64c0 17.67 14.34 32 32.02 32l128 .001l.0918 71.1c0 9.578 5.707 18.25 14.51 22.05c8.803 3.781 19.03 1.984 26-4.594l144.1-136C514.4 264.4 514.4 247.6 504.8 238.5z"),_(e,"slot","icon"),_(e,"class","h-12 w-12 xl:h-10 xl:w-10 "+Ye+" xl:mr-1 "+Ue+" cursor-pointer"),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"viewBox","0 0 512 512")},m(a,o){B(a,e,o),T(e,r),n=!0},p(a,o){t=a},i(a){n||(we(()=>{s&&s.end(1),i=_e(e,Q,t[17]),i.start()}),n=!0)},o(a){i&&i.invalidate(),s=ve(e,Q,t[18]),n=!1},d(a){a&&w(e),a&&s&&s.end()}}}function kr(t,e){let r,i=e[41]+"",s,n,a,o;function l(){return e[36](e[41])}return{key:t,first:null,c(){r=C("div"),s=K(i),n=$(),this.h()},l(c){r=I(c,"DIV",{role:!0,class:!0});var f=A(r);s=J(f,i),n=U(f),f.forEach(w),this.h()},h(){_(r,"role","button"),_(r,"class","block px-4 py-2 text-sm cursor-pointer hover:bg-white hover:text-gray-700"),this.first=r},m(c,f){B(c,r,f),T(r,s),T(r,n),a||(o=q(r,"click",l),a=!0)},p(c,f){e=c},d(c){c&&w(r),a=!1,o()}}}function Ji(t){let e,r=[],i=new Map,s=t[21];const n=a=>a[41];for(let a=0;a<s.length;a+=1){let o=hr(t,s,a),l=n(o);i.set(l,r[a]=kr(l,o))}return{c(){e=C("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=I(a,"DIV",{class:!0,slot:!0});var o=A(e);for(let l=0;l<r.length;l+=1)r[l].l(o);o.forEach(w),this.h()},h(){_(e,"class","bg-gray-700 w-40 md:w-32"),_(e,"slot","content")},m(a,o){B(a,e,o);for(let l=0;l<r.length;l+=1)r[l].m(e,null)},p(a,o){o[0]&35651584&&(s=a[21],r=nt(r,o,n,1,a,s,i,e,Mt,kr,null,hr))},d(a){a&&w(e);for(let o=0;o<r.length;o+=1)r[o].d()}}}function Er(t){let e,r,i,s,n,a,o,l,c,f,m,u,h,d;return r=new Le({props:{icon:t[14]===R.LOCAL?er:tr}}),l=new Le({props:{icon:_i}}),{c(){e=C("div"),Z(r.$$.fragment),a=$(),o=C("div"),Z(l.$$.fragment),this.h()},l(p){e=I(p,"DIV",{class:!0});var g=A(e);W(r.$$.fragment,g),g.forEach(w),a=U(p),o=I(p,"DIV",{class:!0});var E=A(o);W(l.$$.fragment,E),E.forEach(w),this.h()},h(){_(e,"class",i="flex h-full items-center text-xl xl:text-lg "+Ot+" "+Ue+" cursor-pointer"),_(o,"class",c="flex h-full items-center text-xl xl:text-lg "+Ot+" "+Ue+" cursor-pointer")},m(p,g){B(p,e,g),D(r,e,null),B(p,a,g),B(p,o,g),D(l,o,null),u=!0,h||(d=[q(e,"click",t[38]),q(o,"click",t[39])],h=!0)},p(p,g){t=p;const E={};g[0]&16384&&(E.icon=t[14]===R.LOCAL?er:tr),r.$set(E)},i(p){u||(L(r.$$.fragment,p),we(()=>{n&&n.end(1),s=_e(e,Q,t[17]),s.start()}),L(l.$$.fragment,p),we(()=>{m&&m.end(1),f=_e(o,Q,t[17]),f.start()}),u=!0)},o(p){M(r.$$.fragment,p),s&&s.invalidate(),n=ve(e,Q,t[18]),M(l.$$.fragment,p),f&&f.invalidate(),m=ve(o,Q,t[18]),u=!1},d(p){p&&w(e),Y(r),p&&n&&n.end(),p&&w(a),p&&w(o),Y(l),p&&m&&m.end(),h=!1,De(d)}}}function Qi(t){let e,r,i,s,n,a,o,l,c,f,m,u;const h=[Ui,$i],d=[];function p(g,E){return g[6]?1:0}return l=p(t),c=d[l]=h[l](t),{c(){e=C("input"),r=$(),i=C("input"),s=$(),n=C("input"),a=$(),o=C("div"),c.c(),this.h()},l(g){e=I(g,"INPUT",{type:!0,accept:!0}),r=U(g),i=I(g,"INPUT",{type:!0}),s=U(g),n=I(g,"INPUT",{type:!0,accept:!0}),a=U(g),o=I(g,"DIV",{class:!0});var E=A(o);c.l(E),E.forEach(w),this.h()},h(){e.hidden=!0,e.multiple=!0,_(e,"type","file"),_(e,"accept",".htmlz,.epub"),i.hidden=!0,i.multiple=!0,_(i,"type","file"),n.hidden=!0,_(n,"type","file"),_(n,"accept",".zip"),_(o,"class","relative h-12 bg-gray-700 text-white xl:h-10")},m(g,E){B(g,e,E),t[26](e),B(g,r,E),B(g,i,E),t[27](i),B(g,s,E),B(g,n,E),t[28](n),B(g,a,E),B(g,o,E),d[l].m(o,null),f=!0,m||(u=[tt(ht.call(null,e,t[22])),tt(zi.call(null,i)),tt(ht.call(null,i,t[22])),tt(ht.call(null,n,t[23]))],m=!0)},p(g,E){let N=l;l=p(g),l===N?d[l].p(g,E):(de(),M(d[N],1,1,()=>{d[N]=null}),he(),c=d[l],c?c.p(g,E):(c=d[l]=h[l](g),c.c()),L(c,1),c.m(o,null))},i(g){f||(L(c),f=!0)},o(g){M(c),f=!1},d(g){g&&w(e),t[26](null),g&&w(r),g&&w(i),t[27](null),g&&w(s),g&&w(n),t[28](null),g&&w(a),g&&w(o),d[l].d(),m=!1,De(u)}}}const Ye="p-3 xl:p-2.5",es="-translate-x-3 xl:-translate-x-2.5";function ts(t,e,r){let i,s,n;fe(t,lt,k=>r(13,i=k)),fe(t,it,k=>r(14,s=k)),fe(t,Ci,k=>r(15,n=k));let{hasBooks:a}=e,{hasBookOpened:o}=e,{selectMode:l}=e,{selectedCount:c}=e,{cancelTooltip:f=""}=e,{replicationProgress:m=0}=e,{replicationToProgress:u=0}=e,{replicationProgressRemaining:h="~ ??:??:??"}=e;const d=bt(),p={delay:150,duration:150,easing:Kt},g={duration:150,easing:Kt},E=[{label:"Import File(s)",type:"file"},{label:"Import Folder(s)",type:"folder"},{label:"Import Backup",type:"backup"}],N=[{label:"Local",key:R.LOCAL,applyExtraClasses:!1}],b=["Settings","Bug Report","Github"];let y,P,v,O,S;function H(k){d("filesChange",[...k])}function te(k){d("importBackup",[...k])}function ue(k){switch(k){case"folder":P.click();break;case"backup":v.click();break;default:y.click();break}}function pe(k){switch(S.toggleOpen(),k){case"Bug Report":d("bugReportClick");break;case"Github":window.open("https://github.com/ttu-ttu/ebook-reader","_blank");break;default:zr("/settings");break}}mt(R.GDRIVE)&&N.push({label:"GDrive",key:R.GDRIVE,applyExtraClasses:!0}),mt(R.ONEDRIVE)&&N.push({label:"OneDrive",key:R.ONEDRIVE,applyExtraClasses:!0});function ae(k){ye[k?"unshift":"push"](()=>{y=k,r(8,y)})}function Ae(k){ye[k?"unshift":"push"](()=>{P=k,r(9,P)})}function je(k){ye[k?"unshift":"push"](()=>{v=k,r(10,v)})}const Ce=()=>r(0,l=a&&!l),Ie=()=>r(0,l=!1),Ve=()=>d("backToBookClick"),Se=()=>d("selectAllClick"),Fe=k=>{(i||s===R.LOCAL)&&ue(k.type)},qe=async k=>{k.applyExtraClasses&&!i||(O.toggleOpen(),k.key!==s&&(it.next(k.key),Ne.dataListChanged$.next(!0)))};function Pe(k){ye[k?"unshift":"push"](()=>{O=k,r(11,O)})}const xe=k=>pe(k);function ze(k){ye[k?"unshift":"push"](()=>{S=k,r(12,S)})}const He=()=>d("replicateBookData"),$e=()=>d("removeClick"),Xe=()=>d("cancelReplication");return t.$$set=k=>{"hasBooks"in k&&r(1,a=k.hasBooks),"hasBookOpened"in k&&r(2,o=k.hasBookOpened),"selectMode"in k&&r(0,l=k.selectMode),"selectedCount"in k&&r(3,c=k.selectedCount),"cancelTooltip"in k&&r(4,f=k.cancelTooltip),"replicationProgress"in k&&r(5,m=k.replicationProgress),"replicationToProgress"in k&&r(6,u=k.replicationToProgress),"replicationProgressRemaining"in k&&r(7,h=k.replicationProgressRemaining)},[l,a,o,c,f,m,u,h,y,P,v,O,S,i,s,n,d,p,g,E,N,b,H,te,ue,pe,ae,Ae,je,Ce,Ie,Ve,Se,Fe,qe,Pe,xe,ze,He,$e,Xe]}class rs extends Me{constructor(e){super(),Re(this,e,ts,Qi,Oe,{hasBooks:1,hasBookOpened:2,selectMode:0,selectedCount:3,cancelTooltip:4,replicationProgress:5,replicationToProgress:6,replicationProgressRemaining:7},null,[-1,-1])}}function is(t){let e,r,i,s,n,a,o,l;return{c(){e=C("div"),r=se("svg"),i=se("path"),s=$(),n=C("div"),a=K(t[2]),this.h()},l(c){e=I(c,"DIV",{class:!0});var f=A(e);r=ne(f,"svg",{class:!0,xmlns:!0,viewBox:!0});var m=A(r);i=ne(m,"path",{class:!0,d:!0}),A(i).forEach(w),m.forEach(w),s=U(f),n=I(f,"DIV",{class:!0});var u=A(n);a=J(u,t[2]),u.forEach(w),f.forEach(w),this.h()},h(){_(i,"class","fill-current"),_(i,"d",t[1]),_(r,"class","h-24 w-24 inline-block"),_(r,"xmlns","http://www.w3.org/2000/svg"),_(r,"viewBox",t[0]),_(n,"class","mt-2"),_(e,"class","text-center border border-transparent cursor-pointer p-10 mx-4 "),V(e,"border-current",t[3]),V(e,"hover:border",t[5]||!t[4]),V(e,"hover:border-current",t[5]||!t[4]),V(e,"text-slate-300",!t[5]&&t[4]),V(e,"cursor-not-allowed",!t[5]&&t[4])},m(c,f){B(c,e,f),T(e,r),T(r,i),T(e,s),T(e,n),T(n,a),o||(l=q(e,"click",t[6]),o=!0)},p(c,[f]){f&2&&_(i,"d",c[1]),f&1&&_(r,"viewBox",c[0]),f&4&&Te(a,c[2]),f&8&&V(e,"border-current",c[3]),f&48&&V(e,"hover:border",c[5]||!c[4]),f&48&&V(e,"hover:border-current",c[5]||!c[4]),f&48&&V(e,"text-slate-300",!c[5]&&c[4]),f&48&&V(e,"cursor-not-allowed",!c[5]&&c[4])},i:ge,o:ge,d(c){c&&w(e),o=!1,l()}}}function ss(t,e,r){let i;fe(t,lt,f=>r(5,i=f));let{viewBox:s}=e,{d:n}=e,{label:a}=e,{selected:o}=e,{requiresOnline:l}=e;function c(f){Rr.call(this,t,f)}return t.$$set=f=>{"viewBox"in f&&r(0,s=f.viewBox),"d"in f&&r(1,n=f.d),"label"in f&&r(2,a=f.label),"selected"in f&&r(3,o=f.selected),"requiresOnline"in f&&r(4,l=f.requiresOnline)},[s,n,a,o,l,i,c]}class ns extends Me{constructor(e){super(),Re(this,e,ss,is,Oe,{viewBox:0,d:1,label:2,selected:3,requiresOnline:4})}}function yr(t,e,r){const i=t.slice();return i[8]=e[r],i}function Nr(t,e){let r,i,s;const n=[sr(e[8].source),{label:e[8].label},{selected:e[8].source===e[0]},{requiresOnline:e[8].requiresOnline}];function a(){return e[4](e[8])}let o={};for(let l=0;l<n.length;l+=1)o=xr(o,n[l]);return i=new ns({props:o}),i.$on("click",a),{key:t,first:null,c(){r=gt(),Z(i.$$.fragment),this.h()},l(l){r=gt(),W(i.$$.fragment,l),this.h()},h(){this.first=r},m(l,c){B(l,r,c),D(i,l,c),s=!0},p(l,c){e=l;const f=c&5?Vr(n,[c&4&&Sr(sr(e[8].source)),c&4&&{label:e[8].label},c&5&&{selected:e[8].source===e[0]},c&4&&{requiresOnline:e[8].requiresOnline}]):{};i.$set(f)},i(l){s||(L(i.$$.fragment,l),s=!0)},o(l){M(i.$$.fragment,l),s=!1},d(l){l&&w(r),Y(i,l)}}}function os(t){let e,r=[],i=new Map,s,n,a,o,l,c,f,m,u,h,d,p,g,E,N,b,y=t[2];const P=v=>v[8].source;for(let v=0;v<y.length;v+=1){let O=yr(t,y,v),S=P(O);i.set(S,r[v]=Nr(S,O))}return{c(){e=C("div");for(let v=0;v<r.length;v+=1)r[v].c();s=$(),n=C("div"),a=C("div"),o=C("input"),l=$(),c=C("label"),f=K("Book Data"),m=$(),u=C("div"),h=C("input"),d=$(),p=C("label"),g=K("Bookmark / Progress"),this.h()},l(v){e=I(v,"DIV",{class:!0});var O=A(e);for(let ae=0;ae<r.length;ae+=1)r[ae].l(O);O.forEach(w),s=U(v),n=I(v,"DIV",{class:!0});var S=A(n);a=I(S,"DIV",{class:!0});var H=A(a);o=I(H,"INPUT",{type:!0,id:!0,name:!0}),l=U(H),c=I(H,"LABEL",{for:!0});var te=A(c);f=J(te,"Book Data"),te.forEach(w),H.forEach(w),m=U(S),u=I(S,"DIV",{});var ue=A(u);h=I(ue,"INPUT",{type:!0,id:!0,name:!0}),d=U(ue),p=I(ue,"LABEL",{for:!0});var pe=A(p);g=J(pe,"Bookmark / Progress"),pe.forEach(w),ue.forEach(w),S.forEach(w),this.h()},h(){_(e,"class","flex grow mb-16"),V(e,"justify-between",t[2].length>1),V(e,"justify-center",t[2].length===1),_(o,"type","checkbox"),_(o,"id","bookdata"),_(o,"name","data"),o.__value="data",o.value=o.__value,t[6][0].push(o),_(c,"for","bookdata"),_(a,"class","mb-4 mr-4"),_(h,"type","checkbox"),_(h,"id","bookprogress"),_(h,"name","data"),h.__value="bookmark",h.value=h.__value,t[6][0].push(h),_(p,"for","bookprogress"),_(n,"class","flex ml-5")},m(v,O){B(v,e,O);for(let S=0;S<r.length;S+=1)r[S].m(e,null);B(v,s,O),B(v,n,O),T(n,a),T(a,o),o.checked=~t[1].indexOf(o.__value),T(a,l),T(a,c),T(c,f),T(n,m),T(n,u),T(u,h),h.checked=~t[1].indexOf(h.__value),T(u,d),T(u,p),T(p,g),E=!0,N||(b=[q(o,"change",t[5]),q(h,"change",t[7])],N=!0)},p(v,[O]){O&13&&(y=v[2],de(),r=nt(r,O,P,1,v,y,i,e,Fr,Nr,null,yr),he()),O&4&&V(e,"justify-between",v[2].length>1),O&4&&V(e,"justify-center",v[2].length===1),O&2&&(o.checked=~v[1].indexOf(o.__value)),O&2&&(h.checked=~v[1].indexOf(h.__value))},i(v){if(!E){for(let O=0;O<y.length;O+=1)L(r[O]);E=!0}},o(v){for(let O=0;O<r.length;O+=1)M(r[O]);E=!1},d(v){v&&w(e);for(let O=0;O<r.length;O+=1)r[O].d();v&&w(s),v&&w(n),t[6][0].splice(t[6][0].indexOf(o),1),t[6][0].splice(t[6][0].indexOf(h),1),N=!1,De(b)}}}function ls(t,e,r){let i;fe(t,lt,m=>r(3,i=m));let{icons:s}=e,{target:n}=e,{dataToReplicate:a}=e;const o=[[]],l=m=>{(i||!m.requiresOnline)&&r(0,n=m.source)};function c(){a=Yt(o[0],this.__value,this.checked),r(1,a)}function f(){a=Yt(o[0],this.__value,this.checked),r(1,a)}return t.$$set=m=>{"icons"in m&&r(2,s=m.icons),"target"in m&&r(0,n=m.target),"dataToReplicate"in m&&r(1,a=m.dataToReplicate)},t.$$.update=()=>{t.$$.dirty&8&&(i||r(0,n=R.LOCAL))},[n,a,s,i,l,c,o,f]}class as extends Me{constructor(e){super(),Re(this,e,ls,os,Oe,{icons:2,target:0,dataToReplicate:1})}}function cs(t){let e,r,i,s,n;function a(c){t[6](c)}function o(c){t[7](c)}let l={icons:t[2]};return t[0]!==void 0&&(l.target=t[0]),t[1]!==void 0&&(l.dataToReplicate=t[1]),r=new as({props:l}),ye.push(()=>Nt(r,"target",a)),ye.push(()=>Nt(r,"dataToReplicate",o)),{c(){e=C("div"),Z(r.$$.fragment),this.h()},l(c){e=I(c,"DIV",{class:!0,slot:!0});var f=A(e);W(r.$$.fragment,f),f.forEach(w),this.h()},h(){_(e,"class","flex flex-col min-w-[20rem] min-h-[8rem]"),_(e,"slot","content")},m(c,f){B(c,e,f),D(r,e,null),n=!0},p(c,f){const m={};!i&&f&1&&(i=!0,m.target=c[0],Tt(()=>i=!1)),!s&&f&2&&(s=!0,m.dataToReplicate=c[1],Tt(()=>s=!1)),r.$set(m)},i(c){n||(L(r.$$.fragment,c),n=!0)},o(c){M(r.$$.fragment,c),n=!1},d(c){c&&w(e),Y(r)}}}function us(t){let e,r,i,s,n,a,o,l,c,f,m,u,h;return a=new At({}),f=new At({}),{c(){e=C("div"),r=C("div"),i=C("div"),s=C("button"),n=K(`Cancel
          `),Z(a.$$.fragment),o=$(),l=C("button"),c=K(`Start
        `),Z(f.$$.fragment),this.h()},l(d){e=I(d,"DIV",{class:!0,slot:!0});var p=A(e);r=I(p,"DIV",{class:!0});var g=A(r);i=I(g,"DIV",{class:!0});var E=A(i);s=I(E,"BUTTON",{class:!0});var N=A(s);n=J(N,`Cancel
          `),W(a.$$.fragment,N),N.forEach(w),E.forEach(w),o=U(g),l=I(g,"BUTTON",{class:!0});var b=A(l);c=J(b,`Start
        `),W(f.$$.fragment,b),b.forEach(w),g.forEach(w),p.forEach(w),this.h()},h(){_(s,"class",Ct),_(i,"class","flex"),_(l,"class",Ct),_(r,"class","flex grow justify-between"),_(e,"class","flex flex-col grow"),_(e,"slot","footer")},m(d,p){B(d,e,p),T(e,r),T(r,i),T(i,s),T(s,n),D(a,s,null),T(r,o),T(r,l),T(l,c),D(f,l,null),m=!0,u||(h=[q(s,"click",t[5]),q(l,"click",t[4])],u=!0)},p:ge,i(d){m||(L(a.$$.fragment,d),L(f.$$.fragment,d),m=!0)},o(d){M(a.$$.fragment,d),M(f.$$.fragment,d),m=!1},d(d){d&&w(e),Y(a),Y(f),u=!1,De(h)}}}function fs(t){let e,r;return e=new Ur({props:{$$slots:{footer:[us],content:[cs]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(i){W(e.$$.fragment,i)},m(i,s){D(e,i,s),r=!0},p(i,[s]){const n={};s&515&&(n.$$scope={dirty:s,ctx:i}),e.$set(n)},i(i){r||(L(e.$$.fragment,i),r=!0)},o(i){M(e.$$.fragment,i),r=!1},d(i){Y(e,i)}}}function ds(t,e,r){let i;fe(t,it,u=>r(8,i=u));let{target:s}=e,{dataToReplicate:n}=e;const a=i===R.LOCAL?[{source:R.LOCAL,label:"Zip File",requiresOnline:!1}]:[{source:R.LOCAL,label:"Download to Local",requiresOnline:!1}],o=bt();async function l(){return jr.next({target:s,dataToReplicate:n}),o("close")}i===R.LOCAL&&(mt(R.GDRIVE)&&a.push({source:R.GDRIVE,label:"Google Drive",requiresOnline:!0}),mt(R.ONEDRIVE)&&a.push({source:R.ONEDRIVE,label:"OneDrive",requiresOnline:!0}));const c=()=>o("close");function f(u){s=u,r(0,s)}function m(u){n=u,r(1,n)}return t.$$set=u=>{"target"in u&&r(0,s=u.target),"dataToReplicate"in u&&r(1,n=u.dataToReplicate)},[s,n,a,o,l,c,f,m]}class hs extends Me{constructor(e){super(),Re(this,e,ds,fs,Oe,{target:0,dataToReplicate:1})}}function ps(t){let e;return{c(){e=K(t[0])},l(r){e=J(r,t[0])},m(r,i){B(r,e,i)},p(r,i){i&1&&Te(e,r[0])},d(r){r&&w(e)}}}function gs(t){let e,r;return{c(){e=C("p"),r=K(t[1])},l(i){e=I(i,"P",{});var s=A(e);r=J(s,t[1]),s.forEach(w)},m(i,s){B(i,e,s),T(e,r)},p(i,s){s&2&&Te(r,i[1])},d(i){i&&w(e)}}}function ms(t){let e,r,i,s,n,a;return i=new At({}),{c(){e=C("button"),r=K(`Close
      `),Z(i.$$.fragment),this.h()},l(o){e=I(o,"BUTTON",{class:!0});var l=A(e);r=J(l,`Close
      `),W(i.$$.fragment,l),l.forEach(w),this.h()},h(){_(e,"class",Ct)},m(o,l){B(o,e,l),T(e,r),D(i,e,null),s=!0,n||(a=q(e,"click",t[3]),n=!0)},p:ge,i(o){s||(L(i.$$.fragment,o),s=!0)},o(o){M(i.$$.fragment,o),s=!1},d(o){o&&w(e),Y(i),n=!1,a()}}}function bs(t){let e,r;return e=new Ur({props:{$$slots:{footer:[ms],content:[gs],header:[ps]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(i){W(e.$$.fragment,i)},m(i,s){D(e,i,s),r=!0},p(i,[s]){const n={};s&19&&(n.$$scope={dirty:s,ctx:i}),e.$set(n)},i(i){r||(L(e.$$.fragment,i),r=!0)},o(i){M(e.$$.fragment,i),r=!1},d(i){Y(e,i)}}}function ws(t,e,r){let{title:i}=e,{message:s}=e;const n=bt(),a=()=>n("close");return t.$$set=o=>{"title"in o&&r(0,i=o.title),"message"in o&&r(1,s=o.message)},[i,s,n,a]}class kt extends Me{constructor(e){super(),Re(this,e,ws,bs,Oe,{title:0,message:1})}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */function Et(t,e){const r=new Set(t);return e(r),r}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */async function Zr(t){if(_s(t)){const r=t.createReader(),i=await Wr(r);return(await Promise.all(i.map(n=>Zr(n)))).flat()}return[await new Promise((r,i)=>{t.file(r,i)})]}async function Wr(t){const e=await new Promise((i,s)=>{t.readEntries(i,s)});if(!e.length)return[];const r=await Wr(t);return e.concat(r)}function _s(t){return t.isDirectory}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */async function vs(t){var i;if(!((i=t.dataTransfer)!=null&&i.items))return[];const e=Array.from(t.dataTransfer.items).filter(s=>s.kind==="file").map(s=>s.webkitGetAsEntry()).filter(s=>!!s);return e.length?(await Promise.all(e.map(s=>Zr(s)))).flat():[]}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */function ks(t,e){return new Map(t.map(r=>[r[e],r]))}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */function Vt(t,e="",r){if(t.name!=="AbortError"&&ft.error(`${e}${t.message}`),t.name==="AbortError"||t.name==="ReplicationError"&&!t.isRecoverable){if(r)for(let i=0,{length:s}=r;i<s;i+=1)r[i].clearQueue();throw t}return Be.next({progressToAdd:-1}),`${e}${t.message}`}var St={},Ft={};(function(t){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",i="["+e+"]["+r+"]*",s=new RegExp("^"+i+"$"),n=function(o,l){const c=[];let f=l.exec(o);for(;f;){const m=[];m.startIndex=l.lastIndex-f[0].length;const u=f.length;for(let h=0;h<u;h++)m.push(f[h]);c.push(m),f=l.exec(o)}return c},a=function(o){const l=s.exec(o);return!(l===null||typeof l=="undefined")};t.isExist=function(o){return typeof o!="undefined"},t.isEmptyObject=function(o){return Object.keys(o).length===0},t.merge=function(o,l,c){if(l){const f=Object.keys(l),m=f.length;for(let u=0;u<m;u++)c==="strict"?o[f[u]]=[l[f[u]]]:o[f[u]]=l[f[u]]}},t.getValue=function(o){return t.isExist(o)?o:""},t.isName=a,t.getAllMatches=n,t.nameRegexp=i})(Ft);const xt=Ft,Es={allowBooleanAttributes:!1,unpairedTags:[]};St.validate=function(t,e){e=Object.assign({},Es,e);const r=[];let i=!1,s=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let n=0;n<t.length;n++)if(t[n]==="<"&&t[n+1]==="?"){if(n+=2,n=Or(t,n),n.err)return n}else if(t[n]==="<"){let a=n;if(n++,t[n]==="!"){n=Ar(t,n);continue}else{let o=!1;t[n]==="/"&&(o=!0,n++);let l="";for(;n<t.length&&t[n]!==">"&&t[n]!==" "&&t[n]!=="	"&&t[n]!==`
`&&t[n]!=="\r";n++)l+=t[n];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),n--),!Ps(l)){let m;return l.trim().length===0?m="Invalid space after '<'.":m="Tag '"+l+"' is an invalid name.",re("InvalidTag",m,ce(t,n))}const c=Ts(t,n);if(c===!1)return re("InvalidAttr","Attributes for '"+l+"' have open quote.",ce(t,n));let f=c.value;if(n=c.index,f[f.length-1]==="/"){const m=n-f.length;f=f.substring(0,f.length-1);const u=Cr(f,e);if(u===!0)i=!0;else return re(u.err.code,u.err.msg,ce(t,m+u.err.line))}else if(o)if(c.tagClosed){if(f.trim().length>0)return re("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",ce(t,a));{const m=r.pop();if(l!==m.tagName){let u=ce(t,m.tagStartPos);return re("InvalidTag","Expected closing tag '"+m.tagName+"' (opened in line "+u.line+", col "+u.col+") instead of closing tag '"+l+"'.",ce(t,a))}r.length==0&&(s=!0)}}else return re("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",ce(t,n));else{const m=Cr(f,e);if(m!==!0)return re(m.err.code,m.err.msg,ce(t,n-f.length+m.err.line));if(s===!0)return re("InvalidXml","Multiple possible root nodes found.",ce(t,n));e.unpairedTags.indexOf(l)!==-1||r.push({tagName:l,tagStartPos:a}),i=!0}for(n++;n<t.length;n++)if(t[n]==="<")if(t[n+1]==="!"){n++,n=Ar(t,n);continue}else if(t[n+1]==="?"){if(n=Or(t,++n),n.err)return n}else break;else if(t[n]==="&"){const m=Cs(t,n);if(m==-1)return re("InvalidChar","char '&' is not expected.",ce(t,n));n=m}else if(s===!0&&!Tr(t[n]))return re("InvalidXml","Extra text at the end",ce(t,n));t[n]==="<"&&n--}}else{if(Tr(t[n]))continue;return re("InvalidChar","char '"+t[n]+"' is not expected.",ce(t,n))}if(i){if(r.length==1)return re("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",ce(t,r[0].tagStartPos));if(r.length>0)return re("InvalidXml","Invalid '"+JSON.stringify(r.map(n=>n.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return re("InvalidXml","Start tag expected.",1);return!0};function Tr(t){return t===" "||t==="	"||t===`
`||t==="\r"}function Or(t,e){const r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const i=t.substr(r,e-r);if(e>5&&i==="xml")return re("InvalidXml","XML declaration allowed only at the start of the document.",ce(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function Ar(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const ys='"',Ns="'";function Ts(t,e){let r="",i="",s=!1;for(;e<t.length;e++){if(t[e]===ys||t[e]===Ns)i===""?i=t[e]:i!==t[e]||(i="");else if(t[e]===">"&&i===""){s=!0;break}r+=t[e]}return i!==""?!1:{value:r,index:e,tagClosed:s}}const Os=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Cr(t,e){const r=xt.getAllMatches(t,Os),i={};for(let s=0;s<r.length;s++){if(r[s][1].length===0)return re("InvalidAttr","Attribute '"+r[s][2]+"' has no space in starting.",Qe(r[s]));if(r[s][3]!==void 0&&r[s][4]===void 0)return re("InvalidAttr","Attribute '"+r[s][2]+"' is without value.",Qe(r[s]));if(r[s][3]===void 0&&!e.allowBooleanAttributes)return re("InvalidAttr","boolean attribute '"+r[s][2]+"' is not allowed.",Qe(r[s]));const n=r[s][2];if(!Is(n))return re("InvalidAttr","Attribute '"+n+"' is an invalid name.",Qe(r[s]));if(!i.hasOwnProperty(n))i[n]=1;else return re("InvalidAttr","Attribute '"+n+"' is repeated.",Qe(r[s]))}return!0}function As(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}function Cs(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,As(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}function re(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function Is(t){return xt.isName(t)}function Ps(t){return xt.isName(t)}function ce(t,e){const r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Qe(t){return t.startIndex+t[1].length}var zt={};const Dr={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1},Bs=function(t){return Object.assign({},Dr,t)};zt.buildOptions=Bs;zt.defaultOptions=Dr;class Ls{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,r){this.child.push({[e]:r})}addChild(e){e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,[":@"]:e[":@"]}):this.child.push({[e.tagname]:e.child})}}var Ms=Ls;function Rs(t,e){const r={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let i=1,s=!1,n=!1,a=!1,o="";for(;e<t.length;e++)if(t[e]==="<"){if(s&&t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y")e+=7,n=!0;else if(s&&t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T")e+=8;else if(t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-")a=!0;else throw new Error("Invalid DOCTYPE");i++,o=""}else if(t[e]===">"){if(a)if(t[e-1]==="-"&&t[e-2]==="-")a=!1;else throw new Error("Invalid XML comment in DOCTYPE");else n&&(Ss(o,r),n=!1);if(i--,i===0)break}else t[e]==="["?s=!0:o+=t[e];if(i!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:e}}const Vs=RegExp(`^\\s([a-zA-z0-0]+)[ 	](['"])([^&]+)\\2`);function Ss(t,e){const r=Vs.exec(t);r&&(e[r[1]]={regx:RegExp(`&${r[1]};`,"g"),val:r[3]})}var Fs=Rs;const xs=/^[-+]?0x[a-fA-F0-9]+$/,zs=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const $s={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Us(t,e={}){if(e=Object.assign({},$s,e),!t||typeof t!="string")return t;let r=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(r))return t;if(e.hex&&xs.test(r))return Number.parseInt(r,16);{const i=zs.exec(r);if(i){const s=i[1],n=i[2];let a=js(i[3]);const o=i[4]||i[6];if(!e.leadingZeros&&n.length>0&&s&&r[2]!==".")return t;if(!e.leadingZeros&&n.length>0&&!s&&r[1]!==".")return t;{const l=Number(r),c=""+l;return c.search(/[eE]/)!==-1||o?e.eNotation?l:t:r.indexOf(".")!==-1?c==="0"&&a===""||c===a||s&&c==="-"+a?l:t:n?a===c||s+a===c?l:t:r===c||r===s+c?l:t}}else return t}}function js(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}var qs=Us;const $t=Ft,et=Ms,Hs=Fs,Xs=qs;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,$t.nameRegexp);class Gs{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=Zs,this.parseXml=Js,this.parseTextData=Ws,this.resolveNameSpace=Ds,this.buildAttributesMap=Ks,this.isItStopNode=tn,this.replaceEntitiesValue=Qs,this.readStopNodeData=sn,this.saveTextToParentTag=en}}function Zs(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const i=e[r];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:t[i]}}}function Ws(t,e,r,i,s,n,a){if(t!==void 0&&(this.options.trimValues&&!i&&(t=t.trim()),t.length>0)){a||(t=this.replaceEntitiesValue(t));const o=this.options.tagValueProcessor(e,t,r,s,n);return o==null?t:typeof o!=typeof t||o!==t?o:this.options.trimValues?Bt(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?Bt(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function Ds(t){if(this.options.removeNSPrefix){const e=t.split(":"),r=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=r+e[1])}return t}const Ys=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Ks(t,e){if(!this.options.ignoreAttributes&&typeof t=="string"){const r=$t.getAllMatches(t,Ys),i=r.length,s={};for(let n=0;n<i;n++){const a=this.resolveNameSpace(r[n][1]);let o=r[n][4];const l=this.options.attributeNamePrefix+a;if(a.length)if(o!==void 0){this.options.trimValues&&(o=o.trim()),o=this.replaceEntitiesValue(o);const c=this.options.attributeValueProcessor(a,o,e);c==null?s[l]=o:typeof c!=typeof o||c!==o?s[l]=c:s[l]=Bt(o,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[l]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){const n={};return n[this.options.attributesGroupName]=s,n}return s}}const Js=function(t){t=t.replace(/\r\n?/g,`
`);const e=new et("!xml");let r=e,i="",s="";for(let n=0;n<t.length;n++)if(t[n]==="<")if(t[n+1]==="/"){const o=pt(t,">",n,"Closing Tag is not closed.");let l=t.substring(n+2,o).trim();if(this.options.removeNSPrefix){const c=l.indexOf(":");c!==-1&&(l=l.substr(c+1))}r&&(i=this.saveTextToParentTag(i,r,s)),s=s.substr(0,s.lastIndexOf(".")),r=this.tagsNodeStack.pop(),i="",n=o}else if(t[n+1]==="?"){let o=Pt(t,n,!1,"?>");if(!o)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,r,s),!(this.options.ignoreDeclaration&&o.tagName==="?xml"||this.options.ignorePiTags)){const l=new et(o.tagName);l.add(this.options.textNodeName,""),o.tagName!==o.tagExp&&o.attrExpPresent&&(l[":@"]=this.buildAttributesMap(o.tagExp,s)),r.addChild(l)}n=o.closeIndex+1}else if(t.substr(n+1,3)==="!--"){const o=pt(t,"-->",n+4,"Comment is not closed.");if(this.options.commentPropName){const l=t.substring(n+4,o-2);i=this.saveTextToParentTag(i,r,s),r.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}n=o}else if(t.substr(n+1,2)==="!D"){const o=Hs(t,n);this.docTypeEntities=o.entities,n=o.i}else if(t.substr(n+1,2)==="!["){const o=pt(t,"]]>",n,"CDATA is not closed.")-2,l=t.substring(n+9,o);if(i=this.saveTextToParentTag(i,r,s),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]);else{let c=this.parseTextData(l,r.tagname,s,!0,!1,!0);c==null&&(c=""),r.add(this.options.textNodeName,c)}n=o+2}else{let o=Pt(t,n,this.options.removeNSPrefix),l=o.tagName,c=o.tagExp,f=o.attrExpPresent,m=o.closeIndex;r&&i&&r.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,r,s,!1)),l!==e.tagname&&(s+=s?"."+l:l);const u=r;if(u&&this.options.unpairedTags.indexOf(u.tagname)!==-1&&(r=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,s,l)){let h="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)n=o.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)n=o.closeIndex;else{const p=this.readStopNodeData(t,l,m+1);if(!p)throw new Error(`Unexpected end of ${l}`);n=p.i,h=p.tagContent}const d=new et(l);l!==c&&f&&(d[":@"]=this.buildAttributesMap(c,s)),h&&(h=this.parseTextData(h,l,s,!0,f,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),d.add(this.options.textNodeName,h),r.addChild(d)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),c=l):c=c.substr(0,c.length-1);const h=new et(l);l!==c&&f&&(h[":@"]=this.buildAttributesMap(c,s)),s=s.substr(0,s.lastIndexOf(".")),r.addChild(h)}else{const h=new et(l);this.tagsNodeStack.push(r),l!==c&&f&&(h[":@"]=this.buildAttributesMap(c,s)),r.addChild(h),r=h}i="",n=m}}else i+=t[n];return e.child},Qs=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(let e in this.lastEntities){const r=this.lastEntities[e];t=t.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const r=this.htmlEntities[e];t=t.replace(r.regex,r.val)}}return t};function en(t,e,r,i){return t&&(i===void 0&&(i=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,r,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,i),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function tn(t,e,r){const i="*."+r;for(const s in t){const n=t[s];if(i===n||e===n)return!0}return!1}function rn(t,e,r=">"){let i,s="";for(let n=e;n<t.length;n++){let a=t[n];if(i)a===i&&(i="");else if(a==='"'||a==="'")i=a;else if(a===r[0])if(r[1]){if(t[n+1]===r[1])return{data:s,index:n}}else return{data:s,index:n};else a==="	"&&(a=" ");s+=a}}function pt(t,e,r,i){const s=t.indexOf(e,r);if(s===-1)throw new Error(i);return s+e.length-1}function Pt(t,e,r,i=">"){const s=rn(t,e+1,i);if(!s)return;let n=s.data;const a=s.index,o=n.search(/\s/);let l=n,c=!0;if(o!==-1&&(l=n.substr(0,o).replace(/\s\s*$/,""),n=n.substr(o+1)),r){const f=l.indexOf(":");f!==-1&&(l=l.substr(f+1),c=l!==s.data.substr(f+1))}return{tagName:l,tagExp:n,closeIndex:a,attrExpPresent:c}}function sn(t,e,r){const i=r;let s=1;for(;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="/"){const n=pt(t,">",r,`${e} is not closed`);if(t.substring(r+2,n).trim()===e&&(s--,s===0))return{tagContent:t.substring(i,r),i:n};r=n}else{const n=Pt(t,r,">");n&&((n&&n.tagName)===e&&s++,r=n.closeIndex)}}function Bt(t,e,r){if(e&&typeof t=="string"){const i=t.trim();return i==="true"?!0:i==="false"?!1:Xs(t,r)}else return $t.isExist(t)?t:""}var nn=Gs,Yr={};function on(t,e){return Kr(t,e)}function Kr(t,e,r){let i;const s={};for(let n=0;n<t.length;n++){const a=t[n],o=ln(a);let l="";if(r===void 0?l=o:l=r+"."+o,o===e.textNodeName)i===void 0?i=a[o]:i+=""+a[o];else{if(o===void 0)continue;if(a[o]){let c=Kr(a[o],e,l);const f=cn(c,e);a[":@"]?an(c,a[":@"],l,e):Object.keys(c).length===1&&c[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?c=c[e.textNodeName]:Object.keys(c).length===0&&(e.alwaysCreateTextNode?c[e.textNodeName]="":c=""),s[o]!==void 0&&s.hasOwnProperty(o)?(Array.isArray(s[o])||(s[o]=[s[o]]),s[o].push(c)):e.isArray(o,l,f)?s[o]=[c]:s[o]=c}}}return typeof i=="string"?i.length>0&&(s[e.textNodeName]=i):i!==void 0&&(s[e.textNodeName]=i),s}function ln(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const i=e[r];if(i!==":@")return i}}function an(t,e,r,i){if(e){const s=Object.keys(e),n=s.length;for(let a=0;a<n;a++){const o=s[a];i.isArray(o,r+"."+o,!0,!0)?t[o]=[e[o]]:t[o]=e[o]}}}function cn(t,e){const r=Object.keys(t).length;return!!(r===0||r===1&&t[e.textNodeName])}Yr.prettify=on;const{buildOptions:un}=zt,fn=nn,{prettify:dn}=Yr,hn=St;class pn{constructor(e){this.externalEntities={},this.options=un(e)}parse(e,r){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});const n=hn.validate(e,r);if(n!==!0)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}const i=new fn(this.options);i.addExternalEntities(this.externalEntities);const s=i.parseXml(e);return this.options.preserveOrder||s===void 0?s:dn(s,this.options)}addEntity(e,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[e]=r}}var gn=pn;const mn=`
`;function bn(t,e){return Jr(t,e,"",0)}function Jr(t,e,r,i){let s="",n="";e.format&&e.indentBy.length>0&&(n=mn+""+e.indentBy.repeat(i));for(let a=0;a<t.length;a++){const o=t[a],l=wn(o);let c="";if(r.length===0?c=l:c=`${r}.${l}`,l===e.textNodeName){let h=o[l];_n(c,e)||(h=e.tagValueProcessor(l,h),h=Qr(h,e)),s+=n+h;continue}else if(l===e.cdataPropName){s+=n+`<![CDATA[${o[l][0][e.textNodeName]}]]>`;continue}else if(l===e.commentPropName){s+=n+`<!--${o[l][0][e.textNodeName]}-->`;continue}else if(l[0]==="?"){const h=Ir(o[":@"],e),d=l==="?xml"?"":n;let p=o[l][0][e.textNodeName];p=p.length!==0?" "+p:"",s+=d+`<${l}${p}${h}?>`;continue}const f=Ir(o[":@"],e);let m=n+`<${l}${f}`,u=Jr(o[l],e,c,i+1);e.unpairedTags.indexOf(l)!==-1?e.suppressUnpairedNode?s+=m+">":s+=m+"/>":(!u||u.length===0)&&e.suppressEmptyNode?s+=m+"/>":s+=m+`>${u}${n}</${l}>`}return s}function wn(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const i=e[r];if(i!==":@")return i}}function Ir(t,e){let r="";if(t&&!e.ignoreAttributes)for(let i in t){let s=e.attributeValueProcessor(i,t[i]);s=Qr(s,e),s===!0&&e.suppressBooleanAttributes?r+=` ${i.substr(e.attributeNamePrefix.length)}`:r+=` ${i.substr(e.attributeNamePrefix.length)}="${s}"`}return r}function _n(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let i in e.stopNodes)if(e.stopNodes[i]===t||e.stopNodes[i]==="*."+r)return!0;return!1}function Qr(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){const i=e.entities[r];t=t.replace(i.regex,i.val)}return t}var vn=bn;const kn=vn,En={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function Ut(t){this.options=Object.assign({},En,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=In),this.processTextOrObjNode=Nn,this.options.format?(this.indentate=Cn,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=An,this.buildObjNode=Tn):(this.buildTextNode=Br,this.buildObjNode=Pr),this.buildTextValNode=Br,this.buildObjectNode=Pr,this.replaceEntitiesValue=On,this.buildAttrPairStr=yn}Ut.prototype.build=function(t){return this.options.preserveOrder?kn(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)};Ut.prototype.j2x=function(t,e){let r="",i="";for(let s in t)if(typeof t[s]!="undefined")if(t[s]===null)s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(t[s]instanceof Date)i+=this.buildTextNode(t[s],s,"",e);else if(typeof t[s]!="object"){const n=this.isAttribute(s);if(n)r+=this.buildAttrPairStr(n,""+t[s]);else if(s===this.options.textNodeName){let a=this.options.tagValueProcessor(s,""+t[s]);i+=this.replaceEntitiesValue(a)}else i+=this.buildTextNode(t[s],s,"",e)}else if(Array.isArray(t[s])){const n=t[s].length;for(let a=0;a<n;a++){const o=t[s][a];typeof o=="undefined"||(o===null?s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar:typeof o=="object"?i+=this.processTextOrObjNode(o,s,e):i+=this.buildTextNode(o,s,"",e))}}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const n=Object.keys(t[s]),a=n.length;for(let o=0;o<a;o++)r+=this.buildAttrPairStr(n[o],""+t[s][n[o]])}else i+=this.processTextOrObjNode(t[s],s,e);return{attrStr:r,val:i}};function yn(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'}function Nn(t,e,r){const i=this.j2x(t,r+1);return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextNode(t[this.options.textNodeName],e,i.attrStr,r):this.buildObjNode(i.val,e,i.attrStr,r)}function Pr(t,e,r,i){let s="</"+e+this.tagEndChar,n="";return e[0]==="?"&&(n="?",s=""),r&&t.indexOf("<")===-1?this.indentate(i)+"<"+e+r+n+">"+t+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&n.length===0?this.indentate(i)+`<!--${t}-->`+this.newLine:this.indentate(i)+"<"+e+r+n+this.tagEndChar+t+this.indentate(i)+s}function Tn(t,e,r,i){return t!==""?this.buildObjectNode(t,e,r,i):e[0]==="?"?this.indentate(i)+"<"+e+r+"?"+this.tagEndChar:this.indentate(i)+"<"+e+r+"/"+this.tagEndChar}function Br(t,e,r,i){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(i)+`<!--${t}-->`+this.newLine;{let s=this.options.tagValueProcessor(e,t);return s=this.replaceEntitiesValue(s),s===""&&this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode?this.indentate(i)+"<"+e+this.tagEndChar:this.indentate(i)+"<"+e+"/"+this.tagEndChar:this.indentate(i)+"<"+e+r+">"+s+"</"+e+this.tagEndChar}}function On(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t}function An(t,e,r,i){return t===""&&this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode?this.indentate(i)+"<"+e+this.tagEndChar:this.indentate(i)+"<"+e+"/"+this.tagEndChar:t!==""?this.buildTextValNode(t,e,r,i):e[0]==="?"?this.indentate(i)+"<"+e+r+"?"+this.tagEndChar:this.indentate(i)+"<"+e+r+"/"+this.tagEndChar}function Cn(t){return this.options.indentBy.repeat(t)}function In(t){return t.startsWith(this.options.attributeNamePrefix)?t.substr(this.attrPrefixLen):!1}var Pn=Ut;const Bn=St,Ln=gn,Mn=Pn;var ei={XMLParser:Ln,XMLValidator:Bn,XMLBuilder:Mn},Lt={exports:{}};(function(t,e){(function(r,i){var s="1.0.2",n="",a="?",o="function",l="undefined",c="object",f="string",m="major",u="model",h="name",d="type",p="vendor",g="version",E="architecture",N="console",b="mobile",y="tablet",P="smarttv",v="wearable",O="embedded",S=255,H="Amazon",te="Apple",ue="ASUS",pe="BlackBerry",ae="Browser",Ae="Chrome",je="Edge",Ce="Firefox",Ie="Google",Ve="Huawei",Se="LG",Fe="Microsoft",qe="Motorola",Pe="Opera",xe="Samsung",ze="Sony",He="Xiaomi",$e="Zebra",Xe="Facebook",k=function(F,j){var x={};for(var ee in F)j[ee]&&j[ee].length%2===0?x[ee]=j[ee].concat(F[ee]):x[ee]=F[ee];return x},G=function(F){for(var j={},x=0;x<F.length;x++)j[F[x].toUpperCase()]=F[x];return j},oe=function(F,j){return typeof F===f?ie(j).indexOf(ie(F))!==-1:!1},ie=function(F){return F.toLowerCase()},ke=function(F){return typeof F===f?F.replace(/[^\d\.]/g,n).split(".")[0]:i},le=function(F,j){if(typeof F===f)return F=F.replace(/^\s\s*/,n).replace(/\s\s*$/,n),typeof j===l?F:F.substring(0,S)},me=function(F,j){for(var x=0,ee,z,ct,X,Ke,Ee;x<j.length&&!Ke;){var Ht=j[x],Xt=j[x+1];for(ee=z=0;ee<Ht.length&&!Ke;)if(Ke=Ht[ee++].exec(F),Ke)for(ct=0;ct<Xt.length;ct++)Ee=Ke[++z],X=Xt[ct],typeof X===c&&X.length>0?X.length===2?typeof X[1]==o?this[X[0]]=X[1].call(this,Ee):this[X[0]]=X[1]:X.length===3?typeof X[1]===o&&!(X[1].exec&&X[1].test)?this[X[0]]=Ee?X[1].call(this,Ee,X[2]):i:this[X[0]]=Ee?Ee.replace(X[1],X[2]):i:X.length===4&&(this[X[0]]=Ee?X[3].call(this,Ee.replace(X[1],X[2])):i):this[X]=Ee||i;x+=2}},wt=function(F,j){for(var x in j)if(typeof j[x]===c&&j[x].length>0){for(var ee=0;ee<j[x].length;ee++)if(oe(j[x][ee],F))return x===a?i:x}else if(oe(j[x],F))return x===a?i:x;return F},si={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},jt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0","2000":"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0","7":"NT 6.1","8":"NT 6.2","8.1":"NT 6.3","10":["NT 6.4","NT 10.0"],RT:"ARM"},qt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,g],[/opios[\/ ]+([\w\.]+)/i],[g,[h,Pe+" Mini"]],[/\bopr\/([\w\.]+)/i],[g,[h,Pe]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[h,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[h,"UC"+ae]],[/\bqbcore\/([\w\.]+)/i],[g,[h,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[g,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[h,"IE"]],[/yabrowser\/([\w\.]+)/i],[g,[h,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+ae],g],[/\bfocus\/([\w\.]+)/i],[g,[h,Ce+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[h,Pe+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[h,Pe+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[h,"MIUI "+ae]],[/fxios\/([-\w\.]+)/i],[g,[h,Ce]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+ae]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+ae],g],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[h,g],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,Xe],g],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[h,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[h,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[h,Ae+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,Ae+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[h,"Android "+ae]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,g],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[g,[h,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[g,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[g,wt,si]],[/(webkit|khtml)\/([\w\.]+)/i],[h,g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[h,Ce+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,g]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[E,"amd64"]],[/(ia32(?=;))/i],[[E,ie]],[/((?:i[346]|x)86)[;\)]/i],[[E,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[E,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[E,"armhf"]],[/windows (ce|mobile); ppc;/i],[[E,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[E,/ower/,n,ie]],[/(sun4\w)[;\)]/i],[[E,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[E,ie]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[p,xe],[d,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[p,xe],[d,b]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[p,te],[d,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[p,te],[d,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[p,Ve],[d,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[u,[p,Ve],[d,b]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[p,He],[d,b]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[p,He],[d,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[p,"OPPO"],[d,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[p,"Vivo"],[d,b]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[p,"Realme"],[d,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[p,qe],[d,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[p,qe],[d,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[p,Se],[d,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[p,Se],[d,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[p,"Lenovo"],[d,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[p,"Nokia"],[d,b]],[/(pixel c)\b/i],[u,[p,Ie],[d,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[p,Ie],[d,b]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[p,ze],[d,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[p,ze],[d,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[p,"OnePlus"],[d,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[p,H],[d,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[p,H],[d,b]],[/(playbook);[-\w\),; ]+(rim)/i],[u,p,[d,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[p,pe],[d,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[p,ue],[d,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[p,ue],[d,b]],[/(nexus 9)/i],[u,[p,"HTC"],[d,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[p,[u,/_/g," "],[d,b]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[p,"Acer"],[d,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[p,"Meizu"],[d,b]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[p,"Sharp"],[d,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,u,[d,b]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,u,[d,y]],[/(surface duo)/i],[u,[p,Fe],[d,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[p,"Fairphone"],[d,b]],[/(u304aa)/i],[u,[p,"AT&T"],[d,b]],[/\bsie-(\w*)/i],[u,[p,"Siemens"],[d,b]],[/\b(rct\w+) b/i],[u,[p,"RCA"],[d,y]],[/\b(venue[\d ]{2,7}) b/i],[u,[p,"Dell"],[d,y]],[/\b(q(?:mv|ta)\w+) b/i],[u,[p,"Verizon"],[d,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[p,"Barnes & Noble"],[d,y]],[/\b(tm\d{3}\w+) b/i],[u,[p,"NuVision"],[d,y]],[/\b(k88) b/i],[u,[p,"ZTE"],[d,y]],[/\b(nx\d{3}j) b/i],[u,[p,"ZTE"],[d,b]],[/\b(gen\d{3}) b.+49h/i],[u,[p,"Swiss"],[d,b]],[/\b(zur\d{3}) b/i],[u,[p,"Swiss"],[d,y]],[/\b((zeki)?tb.*\b) b/i],[u,[p,"Zeki"],[d,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],u,[d,y]],[/\b(ns-?\w{0,9}) b/i],[u,[p,"Insignia"],[d,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[p,"NextBook"],[d,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],u,[d,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],u,[d,b]],[/\b(ph-1) /i],[u,[p,"Essential"],[d,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[p,"Envizen"],[d,y]],[/\b(trio[-\w\. ]+) b/i],[u,[p,"MachSpeed"],[d,y]],[/\btu_(1491) b/i],[u,[p,"Rotor"],[d,y]],[/(shield[\w ]+) b/i],[u,[p,"Nvidia"],[d,y]],[/(sprint) (\w+)/i],[p,u,[d,b]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[p,Fe],[d,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[p,$e],[d,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[p,$e],[d,b]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,u,[d,N]],[/droid.+; (shield) bui/i],[u,[p,"Nvidia"],[d,N]],[/(playstation [345portablevi]+)/i],[u,[p,ze],[d,N]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[p,Fe],[d,N]],[/smart-tv.+(samsung)/i],[p,[d,P]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[p,xe],[d,P]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,Se],[d,P]],[/(apple) ?tv/i],[p,[u,te+" TV"],[d,P]],[/crkey/i],[[u,Ae+"cast"],[p,Ie],[d,P]],[/droid.+aft(\w)( bui|\))/i],[u,[p,H],[d,P]],[/\(dtv[\);].+(aquos)/i],[u,[p,"Sharp"],[d,P]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[p,le],[u,le],[d,P]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,P]],[/((pebble))app/i],[p,u,[d,v]],[/droid.+; (glass) \d/i],[u,[p,Ie],[d,v]],[/droid.+; (wt63?0{2,3})\)/i],[u,[p,$e],[d,v]],[/(quest( 2)?)/i],[u,[p,Xe],[d,v]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[d,O]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[d,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[d,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,y]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[d,b]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[g,[h,je+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[g,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[h,g],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[g,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,g],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[h,[g,wt,jt]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[h,"Windows"],[g,wt,jt]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,"Mac OS"],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[g,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,g],[/\(bb(10);/i],[g,[h,pe]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[h,Ce+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[h,"webOS"]],[/crkey\/([\d\.]+)/i],[g,[h,Ae+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[h,"Chromium OS"],g],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,g],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[h,g]]},be=function(F,j){if(typeof F===c&&(j=F,F=i),!(this instanceof be))return new be(F,j).getResult();var x=F||(typeof r!==l&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:n),ee=j?k(qt,j):qt;return this.getBrowser=function(){var z={};return z[h]=i,z[g]=i,me.call(z,x,ee.browser),z.major=ke(z.version),z},this.getCPU=function(){var z={};return z[E]=i,me.call(z,x,ee.cpu),z},this.getDevice=function(){var z={};return z[p]=i,z[u]=i,z[d]=i,me.call(z,x,ee.device),z},this.getEngine=function(){var z={};return z[h]=i,z[g]=i,me.call(z,x,ee.engine),z},this.getOS=function(){var z={};return z[h]=i,z[g]=i,me.call(z,x,ee.os),z},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return x},this.setUA=function(z){return x=typeof z===f&&z.length>S?le(z,S):z,this},this.setUA(x),this};be.VERSION=s,be.BROWSER=G([h,g,m]),be.CPU=G([E]),be.DEVICE=G([u,p,d,N,b,P,y,v,O]),be.ENGINE=be.OS=G([h,g]),t.exports&&(e=t.exports=be),e.UAParser=be;var Ge=typeof r!==l&&(r.jQuery||r.Zepto);if(Ge&&!Ge.ua){var at=new be;Ge.ua=at.getResult(),Ge.ua.get=function(){return at.getUA()},Ge.ua.set=function(F){at.setUA(F);var j=at.getResult();for(var x in j)Ge.ua[x]=j[x]}}})(typeof window=="object"?window:Pi)})(Lt,Lt.exports);var Rn=Lt.exports;/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */function ti(){gi({useWebWorkers:!Vn()})}function Vn(){if(typeof window=="undefined")return!1;const t=new Rn(window.navigator.userAgent).getResult();return t.os.name==="Android"&&t.browser.name==="Chrome"}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */ti();async function Sn(t){const e=new qr(new Hr(t)),r=await e.getEntries(),i={};let s="",n;if(r.length){const a=r.reduce((d,p)=>(d[p.filename]=p,d),{}),o=await a["META-INF/container.xml"].getData(new dt),l=new ei.XMLParser({ignoreAttributes:!1}),f=l.parse(o).container.rootfiles.rootfile,u=(Array.isArray(f)?f[0]:f)["@_full-path"],h=await a[u].getData(new dt);i[u]=h,s=rr.dirname(u),n=l.parse(h),await Promise.all(n.package.manifest.item.map(async d=>{const p=d["@_href"],g=a[rr.join(s,p)];if(g.getData&&!g.directory){let E;const N=d["@_media-type"];N.startsWith("image/")?E=await g.getData(new Xr(N)):E=await g.getData(new dt),i[p]=E}}))}return await e.close(),{contentsDirectory:s,contents:n,result:i}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */function Fn(t,e){let r="";const i=e.package.manifest.item.filter(s=>s["@_media-type"]==="text/css").map(s=>s["@_href"]);if(i.length){const s=new Set(i),n=Array.from(s).reduce((a,o)=>a+t[o],"");n&&(r=n)}return r}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */function xn(t){var s;const e=t.package.manifest.item.find(n=>n["@_properties"]==="cover-image");if(e)return e["@_href"];const{meta:r}=t.package.metadata;if(!r)return;const i=Array.isArray(r)?r.map(n=>Lr(n)).find(n=>n):Lr(r);if(!!i)return(s=t.package.manifest.item.find(n=>n["@_id"]===i))==null?void 0:s["@_href"]}function Lr(t){if(t["@_name"]==="cover")return t["@_content"]}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */function ri(t){return Object.entries(t).filter(e=>e[1]instanceof Blob).reduce((e,[r,i])=>(e[r]=i,e),{})}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */async function zn(t,e,r){const{contents:i,result:s}=await Sn(t),n=yi(s,i,e),a={title:t.name,hasThumb:!0,styleSheet:Fn(s,i)},{metadata:o}=i.package;if(o){const m=o["dc:title"];typeof m=="string"?a.title=m:m&&m["#text"]&&(a.title=m["#text"])}const l=ri(s),c=xn(i);let f;return c&&(f=l[c]),_t(Je({},a),{elementHtml:n.element.innerHTML,blobs:l,coverImage:f,sections:n.sections,lastModified:r})}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */ti();async function $n(t){const e=new qr(new Hr(t)),r=await e.getEntries(),i={"index.html":"","metadata.opf":"","style.css":""};return r.length&&await Promise.all(r.map(async s=>{if(s.getData&&!s.directory){let n;switch(s.filename){case"index.html":case"metadata.opf":case"style.css":n=await s.getData(new dt);break;default:n=await s.getData(new Xr(Un(s.filename)))}i[s.filename]=n}})),await e.close(),i}function Un(t){const e=/.*\.([^.]+)$/.exec(t);if(e)switch(e[1].toLowerCase()){case"gif":return"image/gif";case"png":return"image/png";case"jpg":case"jpeg":case"jfif":case"jfi":return"image/jpeg";case"bmp":return"image/bmp";case"webp":return"image/webp"}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */function jn(t,e){let i=/.*<body[^>]*>((.|\s)+)<\/body>.*/.exec(t["index.html"])[1];Object.entries(t).filter(([,n])=>n instanceof Blob).forEach(([n])=>{i=i.replaceAll(n,Ni(n))});const s=e.createElement("div");return s.innerHTML=i,Ti(s),Oi(s),s}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */function qn(){return"cover.jpg"}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */async function Hn(t,e,r){var m,u;const i=await $n(t),s=jn(i,e),a=(u=(m=new ei.XMLParser().parse(i["metadata.opf"]))==null?void 0:m.package)==null?void 0:u.metadata,o={title:t.name,hasThumb:!0,styleSheet:i["style.css"],lastModified:Date.now()};a&&a["dc:title"]&&(o.title=a["dc:title"]);const l=ri(i),c=qn();let f;return f=l[c],delete l[c],_t(Je({},o),{elementHtml:s.innerHTML,blobs:l,coverImage:f,lastModified:r})}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */const Xn=/\.(?:htmlz|epub)$/;async function Gn(t,e,r,i,s){const n=Array.from(t).filter(d=>Xn.test(d.name));if(!n.length)throw new Error("File(s) must be HTMLZ or EPUB");const a=await ot(e,r),o=200,l=o*n.length,c=Date.now(),f=[],m=It(1),u=[];let h="";return Be.next({progressToAdd:0,baseProgress:o,maxProgress:l}),n.forEach(d=>u.push(m(async()=>{try{s.throwIfAborted();const p=await(d.name.endsWith(".epub")?zn(d,i,c):Hn(d,i,c));Be.next({progressToAdd:100}),f.push(await a.addBook(p))}catch(p){h=Vt(p,`Error importing ${d.name}: `,[m])}}))),await Promise.all(u),{error:h,dataId:n.length===1?f.at(-1):void 0}}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */async function Zn(t,e,r,i,s){const n=(i.length+(t===R.LOCAL?1:2))*100,a=n*r.length,o=await Ne.db;if(!o)throw new Error("Unable to get Database");Be.next({progressToAdd:0,baseProgress:n,maxProgress:a});const l=await ot(t,e,r.map(d=>d.title)),c=It(1),f=[];let m=0,u=0,h="";return r.forEach(d=>f.push(c(async()=>{const p=It(1),g=[];try{s==null||s.throwIfAborted();const E=await Promise.all(i.map(b=>o.get(b,d.id))),N=m;s==null||s.throwIfAborted(),Be.next({progressToAdd:100}),E.forEach(b=>g.push(p(async()=>{if(s==null||s.throwIfAborted(),b&&Object.prototype.hasOwnProperty.call(b,"title")){const y=b;await l.exportBookData(y),m+=1}else b&&Object.prototype.hasOwnProperty.call(b,"progress")&&(await l.exportBookProgress(d.title,b),m+=1);Be.next({progressToAdd:100})}))),await Promise.all(g),t!==R.LOCAL&&N<m&&console.log("upload cover")}catch(E){h=Vt(E,`Error Processing ${d.title}: `,[c,p]),u+=1}}))),await Promise.all(f),!(s!=null&&s.aborted)&&m&&l instanceof Rt&&await l.createExportZip(document),[m,u,h]}/**
 * @license BSD-3-Clause
 * Copyright (c) 2022, ッツ Reader Authors
 * All rights reserved.
 */async function Wn(t){if(!t.name.endsWith(".zip"))throw new Gr("Invalid Backup File",!1);const e=await ot(R.LOCAL,window);return e instanceof Rt?ii(await e.setImportZip(t),[st.DATA,st.PROGRESS]):[0,0]}async function ii(t,e){const r=e.length*100,i=r*t.length,s=await ot(R.LOCAL,window,t),n=await Ne.db;if(!n)throw new Gr("Unable to get Database",!1);let a=0,o=0;Be.next({progressToAdd:0,baseProgress:r,maxProgress:i});for(let l=0,{length:c}=t;l<c;l+=1){const f=t[l];try{e.includes(st.DATA)&&(await s.importBookData(f),a+=1),e.includes(st.PROGRESS)&&(await s.importBookProgress(f,n),a+=1),Ne.dataListChanged$.next()}catch(m){Vt(m,`Error importing ${f}: `),o+=1}}return s instanceof Rt&&await s.setImportZip(),[a,o]}const{document:yt}=fi;function Dn(t){let e,r,i,s,n,a,o,l,c;return i=new Le({props:{icon:ki,style:"width: 100%; height: auto"}}),{c(){e=C("div"),r=C("div"),Z(i.$$.fragment),s=$(),n=C("label"),a=C("input"),this.h()},l(f){e=I(f,"DIV",{class:!0});var m=A(e);r=I(m,"DIV",{class:!0});var u=A(r);W(i.$$.fragment,u),u.forEach(w),m.forEach(w),s=U(f),n=I(f,"LABEL",{class:!0});var h=A(n);a=I(h,"INPUT",{type:!0,accept:!0}),h.forEach(w),this.h()},h(){_(r,"class","flex justify-center w-3/6 xl:w-3/12"),_(e,"class","flex justify-center pt-44 text-gray-400 text-opacity-40"),_(a,"type","file"),_(a,"accept",".htmlz,.epub"),a.multiple=!0,a.hidden=!0,_(n,"class","fixed z-0 inset-0")},m(f,m){B(f,e,m),T(e,r),D(i,r,null),B(f,s,m),B(f,n,m),T(n,a),o=!0,l||(c=tt(ht.call(null,a,t[14])),l=!0)},p:ge,i(f){o||(L(i.$$.fragment,f),o=!0)},o(f){M(i.$$.fragment,f),o=!1},d(f){f&&w(e),Y(i),f&&w(s),f&&w(n),l=!1,c()}}}function Yn(t){let e,r;return e=new xi({props:{currentBookId:t[9],selectedBookIds:t[3],bookCards:t[8]}}),e.$on("bookClick",t[28]),e.$on("removeBookClick",t[29]),{c(){Z(e.$$.fragment)},l(i){W(e.$$.fragment,i)},m(i,s){D(e,i,s),r=!0},p(i,s){const n={};s[0]&512&&(n.currentBookId=i[9]),s[0]&8&&(n.selectedBookIds=i[3]),s[0]&256&&(n.bookCards=i[8]),e.$set(n)},i(i){r||(L(e.$$.fragment,i),r=!0)},o(i){M(e.$$.fragment,i),r=!1},d(i){Y(e,i)}}}function Kn(t){let e;return{c(){e=K("Loading...")},l(r){e=J(r,"Loading...")},m(r,i){B(r,e,i)},p:ge,i:ge,o:ge,d(r){r&&w(e)}}}function Jn(t){var P;let e,r,i,s,n,a,o,l,c,f,m,u,h,d,p;yt.title=e=Jt("Book Manager");function g(v){t[22](v)}let E={hasBookOpened:!!t[9],selectedCount:t[3].size,hasBooks:!!((P=t[8])!=null&&P.length),cancelTooltip:t[6],replicationProgress:t[1],replicationToProgress:t[2],replicationProgressRemaining:t[7]};t[0]!==void 0&&(E.selectMode=t[0]),s=new rs({props:E}),ye.push(()=>Nt(s,"selectMode",g)),s.$on("selectAllClick",t[17]),s.$on("backToBookClick",t[18]),s.$on("removeClick",t[23]),s.$on("filesChange",t[24]),s.$on("bugReportClick",t[19]),s.$on("cancelReplication",t[25]),s.$on("replicateBookData",t[20]),s.$on("importBackup",t[26]);const N=[Kn,Yn,Dn],b=[];function y(v,O){return!v[8]||v[10]?0:v[8].length?1:2}return m=y(t),u=b[m]=N[m](t),{c(){r=$(),i=C("div"),Z(s.$$.fragment),a=$(),o=C("div"),l=C("button"),c=K("click"),f=$(),u.c(),this.h()},l(v){ui('[data-svelte="svelte-1u9ti14"]',yt.head).forEach(w),r=U(v),i=I(v,"DIV",{class:!0});var S=A(i);W(s.$$.fragment,S),S.forEach(w),a=U(v),o=I(v,"DIV",{class:!0});var H=A(o);l=I(H,"BUTTON",{});var te=A(l);c=J(te,"click"),te.forEach(w),f=U(H),u.l(H),H.forEach(w),this.h()},h(){_(i,"class","elevation-4 fixed inset-x-0 top-0 z-10"),_(o,"class",$r+" h-full pt-16 xl:pt-14")},m(v,O){B(v,r,O),B(v,i,O),D(s,i,null),B(v,a,O),B(v,o,O),T(o,l),T(l,c),T(o,f),b[m].m(o,null),h=!0,d||(p=[q(l,"click",t[27]),q(o,"dragenter",ro),q(o,"dragover",io),q(o,"dragend",so),q(o,"drop",no),q(o,"drop",t[30])],d=!0)},p(v,O){var te;(!h||O&0)&&e!==(e=Jt("Book Manager"))&&(yt.title=e);const S={};O[0]&512&&(S.hasBookOpened=!!v[9]),O[0]&8&&(S.selectedCount=v[3].size),O[0]&256&&(S.hasBooks=!!((te=v[8])!=null&&te.length)),O[0]&64&&(S.cancelTooltip=v[6]),O[0]&2&&(S.replicationProgress=v[1]),O[0]&4&&(S.replicationToProgress=v[2]),O[0]&128&&(S.replicationProgressRemaining=v[7]),!n&&O[0]&1&&(n=!0,S.selectMode=v[0],Tt(()=>n=!1)),s.$set(S);let H=m;m=y(v),m===H?b[m].p(v,O):(de(),M(b[H],1,1,()=>{b[H]=null}),he(),u=b[m],u?u.p(v,O):(u=b[m]=N[m](v),u.c()),L(u,1),u.m(o,null))},i(v){h||(L(s.$$.fragment,v),L(u),h=!0)},o(v){M(s.$$.fragment,v),M(u),h=!1},d(v){v&&w(r),v&&w(i),Y(s),v&&w(a),v&&w(o),b[m].d(),d=!1,De(p)}}}function Qn(t){return t!=null&&t.progress?{progress:typeof t.progress=="string"?+t.progress.slice(0,-1):t.progress,lastProgressModified:t.lastModified||0}:{progress:0,lastProgressModified:0}}function eo(t,e){let r=0;const{lastBookModified:i=0,lastOpen:s=0}=t,{lastBookModified:n=0,lastOpen:a=0}=e;return s||a?r=a-s:r=n-i,r}function to(t){return t&&isFinite(t)?new Date(t*1e3).toISOString().substr(11,8):"??:??:??"}const ro=t=>t.preventDefault(),io=t=>t.preventDefault(),so=t=>t.preventDefault(),no=t=>t.preventDefault();function oo(t,e,r){let i,s,n,a,o;fe(t,it,k=>r(33,i=k)),fe(t,lt,k=>r(34,a=k));const l=new Ii,c=Ne.listLoading$.pipe(vt(k=>k));fe(t,c,k=>r(10,o=k));const f=Ai([Ne.dataList$,Ne.bookmarks$]).pipe(vt(([k,G])=>{const oe=ks(G,"dataId");return k.map(ie=>Je(Je({},ie),ie.remoteId?{}:Qn(oe.get(ie.id)))).sort(eo)}),Qt());fe(t,f,k=>r(8,s=k));const m=Ne.lastItem$.pipe(vt(k=>k==null?void 0:k.dataId),Qt());fe(t,m,k=>r(9,n=k));let u=new Set,h=!1,d=new AbortController,p=d.signal,g="",E=0,N=0,b="~ ??:??:??",y=0,P;Mr(()=>{l.next(),l.complete()});async function v(k){if(!O())return;r(6,g=`Cancels the current Import
Already ${i===R.LOCAL?"imported":"uploaded"} Data will not be deleted`),S();const{error:G,dataId:oe}=await Gn(k,i,window,document,p).catch(ie=>({error:ie.name!=="AbortError"?ie.message:"",dataId:0}));if(H(),G)return Ze.dialogs$.next(ft.history.length?[{component:ut,props:{title:"Bookimport failed",message:"Error(s) occurred during Bookimport"}}]:[{component:kt,props:{title:"Bookimport failed",message:G}}]);oe&&ue(oe)}function O(k=!0){return N?!1:k&&i!==R.LOCAL&&!a?(Ze.dialogs$.next([{component:kt,props:{title:"Error",message:"You have to be online for this Operation"}}]),!1):!0}function S(){r(7,b="~ ??:??:??"),r(1,E=0),r(2,N=1),P=Date.now(),ft.clearHistory(),r(4,d=new AbortController),r(5,p=d.signal)}function H(){r(2,N=0),r(1,E=0),r(6,g="")}function te(k){if(!!O(!1)){if(!h){ue(k);return}r(3,u=Et(u,G=>{if(G.has(k)){G.delete(k);return}G.add(k)}))}}function ue(k){i!==R.LOCAL||!k||(Ne.putLastItem(k),je(k))}async function pe(k){if(!O())return;S();const G=s.length,oe=await ot(i,window),[ie,ke]=await oe.deleteBookData(s.reduce((le,me)=>(k.includes(me.id)&&(le[me.id]=me.title),le),{}));H(),await di(),ke.length===G?r(0,h=!1):r(3,u=Et(u,le=>{ke.forEach(me=>le.delete(me))})),ie&&Ze.dialogs$.next([{component:ut,props:{message:"Error(s) occurred during Deletion"}}])}function ae(){const k=s;r(3,u=Et(u,G=>{k.forEach(oe=>G.add(oe.id))}))}function Ae(){const k=n;!k||je(k)}async function je(k){await zr(`/ebook-reader/b?id=${k}`)}function Ce(){Ze.dialogs$.next([{component:ut,props:{title:"Bug Report",message:"Please include the attached file for your report"}}])}function Ie(){Ze.dialogs$.next([{component:hs,props:{dataToReplicate:[st.PROGRESS],target:R.LOCAL},disableCloseOnClick:!0}])}async function Ve(k){!O()||(r(6,g=`Cancels the current Import
Already ${i===R.LOCAL?"imported":"uploaded"} Data will not be deleted`),S(),await Wn(k),r(0,h=!1),r(2,N=0),r(1,E=0))}Be.pipe(ir(l)).subscribe(k=>{if(!p.aborted){if(y=k.baseProgress||y||0,r(2,N=k.maxProgress||N||0),P=k.executionStart||P,k.progressToAdd===-1){const G=Math.ceil(E/y)*y-E;r(1,E+=G||y)}else r(1,E+=k.progressToAdd);if(k.progressToAdd){const G=(Date.now()-P)/1e3,oe=E/G,ie=(N-E)/oe;r(7,b=`~ ${to(Math.ceil(ie))}`)}}}),jr.pipe(ir(l)).subscribe(async({target:k,dataToReplicate:G})=>{if(!O())return;const oe=s.filter(le=>u.has(le.id));let ie=0,ke=0;k===R.LOCAL&&i===R.LOCAL?r(6,g="Cancels the current Zip Export"):r(6,g=`Cancels the current ${i===R.LOCAL?"Export":"Import"}
Already ${i===R.LOCAL?"uploaded":"downloaded"}  Data will not be deleted`),S();try{[ie,ke]=i===R.LOCAL?await Zn(k,window,oe,G,p):await ii([],[])}catch(le){le.name!=="AbortError"&&le.name!=="ReplicationError"&&ft.error(le.message),le.name!=="AbortError"&&(ke=1)}if(H(),ke||!ie&&!p.aborted)return Ze.dialogs$.next([{component:ke?ut:kt,props:{title:"Process finished",message:ke?"Errors occured":"No Data to process for your Selection"}}])});function Se(k){h=k,r(0,h)}const Fe=()=>pe(Array.from(u)),qe=k=>v(k.detail),Pe=()=>{p.aborted||(d.abort(),r(7,b="Canceling ..."))},xe=k=>Ve(k.detail[0]),ze=()=>{fetch("/auth/callback").then(k=>{k.ok?console.log("ok"):console.log("not ok")})},He=k=>te(k.detail.id),$e=k=>pe([k.detail.id]),Xe=k=>vs(k).then(v);return t.$$.update=()=>{t.$$.dirty[0]&1&&(h||r(3,u=new Set)),t.$$.dirty[0]&6&&console.log(E,N)},[h,E,N,u,d,p,g,b,s,n,o,c,f,m,v,te,pe,ae,Ae,Ce,Ie,Ve,Se,Fe,qe,Pe,xe,ze,He,$e,Xe]}class _o extends Me{constructor(e){super(),Re(this,e,oo,Jn,Oe,{},null,[-1,-1])}}export{_o as default};
